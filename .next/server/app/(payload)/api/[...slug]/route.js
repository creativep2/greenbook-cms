/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/(payload)/api/[...slug]/route";
exports.ids = ["app/(payload)/api/[...slug]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_trangiakiet_Documents_GitHub_greenbook_cms_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/(payload)/api/[...slug]/route.ts */ \"(rsc)/./src/app/(payload)/api/[...slug]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/(payload)/api/[...slug]/route\",\n        pathname: \"/api/[...slug]\",\n        filename: \"route\",\n        bundlePath: \"app/(payload)/api/[...slug]/route\"\n    },\n    resolvedPagePath: \"/Users/trangiakiet/Documents/GitHub/greenbook-cms/src/app/(payload)/api/[...slug]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_trangiakiet_Documents_GitHub_greenbook_cms_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkYocGF5bG9hZCklMkZhcGklMkYlNUIuLi5zbHVnJTVEJTJGcm91dGUmcGFnZT0lMkYocGF5bG9hZCklMkZhcGklMkYlNUIuLi5zbHVnJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGKHBheWxvYWQpJTJGYXBpJTJGJTVCLi4uc2x1ZyU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRyYW5naWFraWV0JTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZ3JlZW5ib29rLWNtcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ0cmFuZ2lha2lldCUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRmdyZWVuYm9vay1jbXMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzBDO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9hcHAvKHBheWxvYWQpL2FwaS9bLi4uc2x1Z10vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvKHBheWxvYWQpL2FwaS9bLi4uc2x1Z10vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9bLi4uc2x1Z11cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvKHBheWxvYWQpL2FwaS9bLi4uc2x1Z10vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9hcHAvKHBheWxvYWQpL2FwaS9bLi4uc2x1Z10vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/access/isSuperAdmin.ts":
/*!************************************!*\
  !*** ./src/access/isSuperAdmin.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   isSuperAdminAccess: () => (/* binding */ isSuperAdminAccess)\n/* harmony export */ });\nconst isSuperAdminAccess = ({ req })=>{\n    return isSuperAdmin(req.user);\n};\nconst isSuperAdmin = (user)=>{\n    return Boolean(user?.roles?.includes('super-admin'));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYWNjZXNzL2lzU3VwZXJBZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUdPLE1BQU1BLHFCQUE2QixDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNoRCxPQUFPQyxhQUFhRCxJQUFJRSxJQUFJO0FBQzlCLEVBQUM7QUFFTSxNQUFNRCxlQUFlLENBQUNDO0lBQzNCLE9BQU9DLFFBQVFELE1BQU1FLE9BQU9DLFNBQVM7QUFDdkMsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvYWNjZXNzL2lzU3VwZXJBZG1pbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY2VzcyB9IGZyb20gJ3BheWxvYWQnXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vcGF5bG9hZC10eXBlcydcblxuZXhwb3J0IGNvbnN0IGlzU3VwZXJBZG1pbkFjY2VzczogQWNjZXNzID0gKHsgcmVxIH0pOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGlzU3VwZXJBZG1pbihyZXEudXNlcilcbn1cblxuZXhwb3J0IGNvbnN0IGlzU3VwZXJBZG1pbiA9ICh1c2VyOiBVc2VyIHwgbnVsbCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gQm9vbGVhbih1c2VyPy5yb2xlcz8uaW5jbHVkZXMoJ3N1cGVyLWFkbWluJykpXG59XG4iXSwibmFtZXMiOlsiaXNTdXBlckFkbWluQWNjZXNzIiwicmVxIiwiaXNTdXBlckFkbWluIiwidXNlciIsIkJvb2xlYW4iLCJyb2xlcyIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/access/isSuperAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/(payload)/api/[...slug]/route.ts":
/*!**************************************************!*\
  !*** ./src/app/(payload)/api/[...slug]/route.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _payload_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payload-config */ \"(rsc)/./src/payload.config.ts\");\n/* harmony import */ var _payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @payloadcms/next/routes */ \"(rsc)/./node_modules/@payloadcms/next/dist/exports/routes.js\");\n/* THIS FILE WAS GENERATED AUTOMATICALLY BY PAYLOAD. */ /* DO NOT MODIFY IT BECAUSE IT COULD BE REWRITTEN AT ANY TIME. */ \n\nconst GET = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.REST_GET)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst POST = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.REST_POST)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst DELETE = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.REST_DELETE)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst PATCH = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.REST_PATCH)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst OPTIONS = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.REST_OPTIONS)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwLyhwYXlsb2FkKS9hcGkvWy4uLnNsdWddL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQsR0FDckQsK0RBQStELEdBQzNCO0FBQ2dFO0FBRTdGLE1BQU1NLE1BQU1KLGlFQUFRQSxDQUFDRix1REFBTUEsRUFBQztBQUM1QixNQUFNTyxPQUFPRixrRUFBU0EsQ0FBQ0wsdURBQU1BLEVBQUM7QUFDOUIsTUFBTVEsU0FBU1Asb0VBQVdBLENBQUNELHVEQUFNQSxFQUFDO0FBQ2xDLE1BQU1TLFFBQVFMLG1FQUFVQSxDQUFDSix1REFBTUEsRUFBQztBQUNoQyxNQUFNVSxVQUFVUCxxRUFBWUEsQ0FBQ0gsdURBQU1BLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL2FwcC8ocGF5bG9hZCkvYXBpL1suLi5zbHVnXS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBUSElTIEZJTEUgV0FTIEdFTkVSQVRFRCBBVVRPTUFUSUNBTExZIEJZIFBBWUxPQUQuICovXG4vKiBETyBOT1QgTU9ESUZZIElUIEJFQ0FVU0UgSVQgQ09VTEQgQkUgUkVXUklUVEVOIEFUIEFOWSBUSU1FLiAqL1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAcGF5bG9hZC1jb25maWcnXG5pbXBvcnQgeyBSRVNUX0RFTEVURSwgUkVTVF9HRVQsIFJFU1RfT1BUSU9OUywgUkVTVF9QQVRDSCwgUkVTVF9QT1NUIH0gZnJvbSAnQHBheWxvYWRjbXMvbmV4dC9yb3V0ZXMnXG5cbmV4cG9ydCBjb25zdCBHRVQgPSBSRVNUX0dFVChjb25maWcpXG5leHBvcnQgY29uc3QgUE9TVCA9IFJFU1RfUE9TVChjb25maWcpXG5leHBvcnQgY29uc3QgREVMRVRFID0gUkVTVF9ERUxFVEUoY29uZmlnKVxuZXhwb3J0IGNvbnN0IFBBVENIID0gUkVTVF9QQVRDSChjb25maWcpXG5leHBvcnQgY29uc3QgT1BUSU9OUyA9IFJFU1RfT1BUSU9OUyhjb25maWcpXG4iXSwibmFtZXMiOlsiY29uZmlnIiwiUkVTVF9ERUxFVEUiLCJSRVNUX0dFVCIsIlJFU1RfT1BUSU9OUyIsIlJFU1RfUEFUQ0giLCJSRVNUX1BPU1QiLCJHRVQiLCJQT1NUIiwiREVMRVRFIiwiUEFUQ0giLCJPUFRJT05TIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/(payload)/api/[...slug]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts":
/*!*****************************************************************!*\
  !*** ./src/collections/Pages/access/superAdminOrTenantAdmin.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   superAdminOrTenantAdminAccess: () => (/* binding */ superAdminOrTenantAdminAccess)\n/* harmony export */ });\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n\n\n/**\n * Tenant admins and super admins can will be allowed access\n */ const superAdminOrTenantAdminAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    return {\n        tenant: {\n            in: (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user, 'tenant-admin')\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvYWNjZXNzL3N1cGVyQWRtaW5PclRlbmFudEFkbWluLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErRDtBQUNKO0FBRzNEOztDQUVDLEdBQ00sTUFBTUUsZ0NBQXdDLENBQUMsRUFBRUMsR0FBRyxFQUFFO0lBQzNELElBQUksQ0FBQ0EsSUFBSUMsSUFBSSxFQUFFO1FBQ2IsT0FBTztJQUNUO0lBRUEsSUFBSUgsa0VBQVlBLENBQUNFLElBQUlDLElBQUksR0FBRztRQUMxQixPQUFPO0lBQ1Q7SUFFQSxPQUFPO1FBQ0xDLFFBQVE7WUFDTkMsSUFBSU4sNkVBQWdCQSxDQUFDRyxJQUFJQyxJQUFJLEVBQUU7UUFDakM7SUFDRjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL2NvbGxlY3Rpb25zL1BhZ2VzL2FjY2Vzcy9zdXBlckFkbWluT3JUZW5hbnRBZG1pbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnQC91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgeyBBY2Nlc3MgfSBmcm9tICdwYXlsb2FkJ1xuXG4vKipcbiAqIFRlbmFudCBhZG1pbnMgYW5kIHN1cGVyIGFkbWlucyBjYW4gd2lsbCBiZSBhbGxvd2VkIGFjY2Vzc1xuICovXG5leHBvcnQgY29uc3Qgc3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3M6IEFjY2VzcyA9ICh7IHJlcSB9KSA9PiB7XG4gIGlmICghcmVxLnVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc1N1cGVyQWRtaW4ocmVxLnVzZXIpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdGVuYW50OiB7XG4gICAgICBpbjogZ2V0VXNlclRlbmFudElEcyhyZXEudXNlciwgJ3RlbmFudC1hZG1pbicpLFxuICAgIH0sXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRVc2VyVGVuYW50SURzIiwiaXNTdXBlckFkbWluIiwic3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3MiLCJyZXEiLCJ1c2VyIiwidGVuYW50IiwiaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Pages/hooks/ensureUniqueSlug.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUniqueSlug: () => (/* binding */ ensureUniqueSlug)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/errors/ValidationError.js\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _utilities_extractID__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utilities/extractID */ \"(rsc)/./src/utilities/extractID.ts\");\n\n\n\nconst ensureUniqueSlug = async ({ data, originalDoc, req, value })=>{\n    // if value is unchanged, skip validation\n    if (originalDoc.slug === value) {\n        return value;\n    }\n    const constraints = [\n        {\n            slug: {\n                equals: value\n            }\n        }\n    ];\n    const incomingTenantID = (0,_utilities_extractID__WEBPACK_IMPORTED_MODULE_1__.extractID)(data?.tenant);\n    const currentTenantID = (0,_utilities_extractID__WEBPACK_IMPORTED_MODULE_1__.extractID)(originalDoc?.tenant);\n    const tenantIDToMatch = incomingTenantID || currentTenantID;\n    if (tenantIDToMatch) {\n        constraints.push({\n            tenant: {\n                equals: tenantIDToMatch\n            }\n        });\n    }\n    const findDuplicatePages = await req.payload.find({\n        collection: 'pages',\n        where: {\n            and: constraints\n        }\n    });\n    if (findDuplicatePages.docs.length > 0 && req.user) {\n        const tenantIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user);\n        // if the user is an admin or has access to more than 1 tenant\n        // provide a more specific error message\n        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n            const attemptedTenantChange = await req.payload.findByID({\n                id: tenantIDToMatch,\n                collection: 'tenants'\n            });\n            throw new payload__WEBPACK_IMPORTED_MODULE_2__.ValidationError({\n                errors: [\n                    {\n                        message: `The \"${attemptedTenantChange.name}\" tenant already has a page with the slug \"${value}\". Slugs must be unique per tenant.`,\n                        path: 'slug'\n                    }\n                ]\n            });\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_2__.ValidationError({\n            errors: [\n                {\n                    message: `A page with the slug ${value} already exists. Slug must be unique per tenant.`,\n                    path: 'slug'\n                }\n            ]\n        });\n    }\n    return value;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaG9va3MvZW5zdXJlVW5pcXVlU2x1Zy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXlDO0FBRTZCO0FBQ3JCO0FBRTFDLE1BQU1HLG1CQUE4QixPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRTtJQUNqRix5Q0FBeUM7SUFDekMsSUFBSUYsWUFBWUcsSUFBSSxLQUFLRCxPQUFPO1FBQzlCLE9BQU9BO0lBQ1Q7SUFFQSxNQUFNRSxjQUF1QjtRQUMzQjtZQUNFRCxNQUFNO2dCQUNKRSxRQUFRSDtZQUNWO1FBQ0Y7S0FDRDtJQUVELE1BQU1JLG1CQUFtQlQsK0RBQVNBLENBQUNFLE1BQU1RO0lBQ3pDLE1BQU1DLGtCQUFrQlgsK0RBQVNBLENBQUNHLGFBQWFPO0lBQy9DLE1BQU1FLGtCQUFrQkgsb0JBQW9CRTtJQUU1QyxJQUFJQyxpQkFBaUI7UUFDbkJMLFlBQVlNLElBQUksQ0FBQztZQUNmSCxRQUFRO2dCQUNORixRQUFRSTtZQUNWO1FBQ0Y7SUFDRjtJQUVBLE1BQU1FLHFCQUFxQixNQUFNVixJQUFJVyxPQUFPLENBQUNDLElBQUksQ0FBQztRQUNoREMsWUFBWTtRQUNaQyxPQUFPO1lBQ0xDLEtBQUtaO1FBQ1A7SUFDRjtJQUVBLElBQUlPLG1CQUFtQk0sSUFBSSxDQUFDQyxNQUFNLEdBQUcsS0FBS2pCLElBQUlrQixJQUFJLEVBQUU7UUFDbEQsTUFBTUMsWUFBWXhCLDZFQUFnQkEsQ0FBQ0ssSUFBSWtCLElBQUk7UUFDM0MsOERBQThEO1FBQzlELHdDQUF3QztRQUN4QyxJQUFJbEIsSUFBSWtCLElBQUksQ0FBQ0UsS0FBSyxFQUFFQyxTQUFTLGtCQUFrQkYsVUFBVUYsTUFBTSxHQUFHLEdBQUc7WUFDbkUsTUFBTUssd0JBQXdCLE1BQU10QixJQUFJVyxPQUFPLENBQUNZLFFBQVEsQ0FBQztnQkFDdkRDLElBQUloQjtnQkFDSkssWUFBWTtZQUNkO1lBRUEsTUFBTSxJQUFJbkIsb0RBQWVBLENBQUM7Z0JBQ3hCK0IsUUFBUTtvQkFDTjt3QkFDRUMsU0FBUyxDQUFDLEtBQUssRUFBRUosc0JBQXNCSyxJQUFJLENBQUMsMkNBQTJDLEVBQUUxQixNQUFNLG1DQUFtQyxDQUFDO3dCQUNuSTJCLE1BQU07b0JBQ1I7aUJBQ0Q7WUFDSDtRQUNGO1FBRUEsTUFBTSxJQUFJbEMsb0RBQWVBLENBQUM7WUFDeEIrQixRQUFRO2dCQUNOO29CQUNFQyxTQUFTLENBQUMscUJBQXFCLEVBQUV6QixNQUFNLGdEQUFnRCxDQUFDO29CQUN4RjJCLE1BQU07Z0JBQ1I7YUFDRDtRQUNIO0lBQ0Y7SUFFQSxPQUFPM0I7QUFDVCxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9QYWdlcy9ob29rcy9lbnN1cmVVbmlxdWVTbHVnLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRmllbGRIb29rLCBXaGVyZSB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IGV4dHJhY3RJRCB9IGZyb20gJ0AvdXRpbGl0aWVzL2V4dHJhY3RJRCdcblxuZXhwb3J0IGNvbnN0IGVuc3VyZVVuaXF1ZVNsdWc6IEZpZWxkSG9vayA9IGFzeW5jICh7IGRhdGEsIG9yaWdpbmFsRG9jLCByZXEsIHZhbHVlIH0pID0+IHtcbiAgLy8gaWYgdmFsdWUgaXMgdW5jaGFuZ2VkLCBza2lwIHZhbGlkYXRpb25cbiAgaWYgKG9yaWdpbmFsRG9jLnNsdWcgPT09IHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBjb25zdCBjb25zdHJhaW50czogV2hlcmVbXSA9IFtcbiAgICB7XG4gICAgICBzbHVnOiB7XG4gICAgICAgIGVxdWFsczogdmFsdWUsXG4gICAgICB9LFxuICAgIH0sXG4gIF1cblxuICBjb25zdCBpbmNvbWluZ1RlbmFudElEID0gZXh0cmFjdElEKGRhdGE/LnRlbmFudClcbiAgY29uc3QgY3VycmVudFRlbmFudElEID0gZXh0cmFjdElEKG9yaWdpbmFsRG9jPy50ZW5hbnQpXG4gIGNvbnN0IHRlbmFudElEVG9NYXRjaCA9IGluY29taW5nVGVuYW50SUQgfHwgY3VycmVudFRlbmFudElEXG5cbiAgaWYgKHRlbmFudElEVG9NYXRjaCkge1xuICAgIGNvbnN0cmFpbnRzLnB1c2goe1xuICAgICAgdGVuYW50OiB7XG4gICAgICAgIGVxdWFsczogdGVuYW50SURUb01hdGNoLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgZmluZER1cGxpY2F0ZVBhZ2VzID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZCh7XG4gICAgY29sbGVjdGlvbjogJ3BhZ2VzJyxcbiAgICB3aGVyZToge1xuICAgICAgYW5kOiBjb25zdHJhaW50cyxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChmaW5kRHVwbGljYXRlUGFnZXMuZG9jcy5sZW5ndGggPiAwICYmIHJlcS51c2VyKSB7XG4gICAgY29uc3QgdGVuYW50SURzID0gZ2V0VXNlclRlbmFudElEcyhyZXEudXNlcilcbiAgICAvLyBpZiB0aGUgdXNlciBpcyBhbiBhZG1pbiBvciBoYXMgYWNjZXNzIHRvIG1vcmUgdGhhbiAxIHRlbmFudFxuICAgIC8vIHByb3ZpZGUgYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VcbiAgICBpZiAocmVxLnVzZXIucm9sZXM/LmluY2x1ZGVzKCdzdXBlci1hZG1pbicpIHx8IHRlbmFudElEcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBhdHRlbXB0ZWRUZW5hbnRDaGFuZ2UgPSBhd2FpdCByZXEucGF5bG9hZC5maW5kQnlJRCh7XG4gICAgICAgIGlkOiB0ZW5hbnRJRFRvTWF0Y2gsXG4gICAgICAgIGNvbGxlY3Rpb246ICd0ZW5hbnRzJyxcbiAgICAgIH0pXG5cbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3Ioe1xuICAgICAgICBlcnJvcnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgVGhlIFwiJHthdHRlbXB0ZWRUZW5hbnRDaGFuZ2UubmFtZX1cIiB0ZW5hbnQgYWxyZWFkeSBoYXMgYSBwYWdlIHdpdGggdGhlIHNsdWcgXCIke3ZhbHVlfVwiLiBTbHVncyBtdXN0IGJlIHVuaXF1ZSBwZXIgdGVuYW50LmAsXG4gICAgICAgICAgICBwYXRoOiAnc2x1ZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcih7XG4gICAgICBlcnJvcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG1lc3NhZ2U6IGBBIHBhZ2Ugd2l0aCB0aGUgc2x1ZyAke3ZhbHVlfSBhbHJlYWR5IGV4aXN0cy4gU2x1ZyBtdXN0IGJlIHVuaXF1ZSBwZXIgdGVuYW50LmAsXG4gICAgICAgICAgcGF0aDogJ3NsdWcnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvbkVycm9yIiwiZ2V0VXNlclRlbmFudElEcyIsImV4dHJhY3RJRCIsImVuc3VyZVVuaXF1ZVNsdWciLCJkYXRhIiwib3JpZ2luYWxEb2MiLCJyZXEiLCJ2YWx1ZSIsInNsdWciLCJjb25zdHJhaW50cyIsImVxdWFscyIsImluY29taW5nVGVuYW50SUQiLCJ0ZW5hbnQiLCJjdXJyZW50VGVuYW50SUQiLCJ0ZW5hbnRJRFRvTWF0Y2giLCJwdXNoIiwiZmluZER1cGxpY2F0ZVBhZ2VzIiwicGF5bG9hZCIsImZpbmQiLCJjb2xsZWN0aW9uIiwid2hlcmUiLCJhbmQiLCJkb2NzIiwibGVuZ3RoIiwidXNlciIsInRlbmFudElEcyIsInJvbGVzIiwiaW5jbHVkZXMiLCJhdHRlbXB0ZWRUZW5hbnRDaGFuZ2UiLCJmaW5kQnlJRCIsImlkIiwiZXJyb3JzIiwibWVzc2FnZSIsIm5hbWUiLCJwYXRoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/index.ts":
/*!****************************************!*\
  !*** ./src/collections/Pages/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pages: () => (/* binding */ Pages)\n/* harmony export */ });\n/* harmony import */ var _hooks_ensureUniqueSlug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hooks/ensureUniqueSlug */ \"(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts\");\n/* harmony import */ var _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/collections/Pages/access/superAdminOrTenantAdmin */ \"(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts\");\n\n\nconst Pages = {\n    slug: 'pages',\n    access: {\n        create: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess,\n        delete: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess,\n        read: ()=>true,\n        update: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess\n    },\n    admin: {\n        useAsTitle: 'title'\n    },\n    fields: [\n        {\n            name: 'title',\n            type: 'text'\n        },\n        {\n            name: 'slug',\n            type: 'text',\n            defaultValue: 'home',\n            hooks: {\n                beforeValidate: [\n                    _hooks_ensureUniqueSlug__WEBPACK_IMPORTED_MODULE_0__.ensureUniqueSlug\n                ]\n            },\n            index: true\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTJEO0FBQ3VDO0FBRTNGLE1BQU1FLFFBQTBCO0lBQ3JDQyxNQUFNO0lBQ05DLFFBQVE7UUFDTkMsUUFBUUosNEdBQTZCQTtRQUNyQ0ssUUFBUUwsNEdBQTZCQTtRQUNyQ00sTUFBTSxJQUFNO1FBQ1pDLFFBQVFQLDRHQUE2QkE7SUFDdkM7SUFDQVEsT0FBTztRQUNMQyxZQUFZO0lBQ2Q7SUFDQUMsUUFBUTtRQUNOO1lBQ0VDLE1BQU07WUFDTkMsTUFBTTtRQUNSO1FBQ0E7WUFDRUQsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLGNBQWM7WUFDZEMsT0FBTztnQkFDTEMsZ0JBQWdCO29CQUFDaEIscUVBQWdCQTtpQkFBQztZQUNwQztZQUNBaUIsT0FBTztRQUNUO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9QYWdlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBlbnN1cmVVbmlxdWVTbHVnIH0gZnJvbSAnLi9ob29rcy9lbnN1cmVVbmlxdWVTbHVnJ1xuaW1wb3J0IHsgc3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3MgfSBmcm9tICdAL2NvbGxlY3Rpb25zL1BhZ2VzL2FjY2Vzcy9zdXBlckFkbWluT3JUZW5hbnRBZG1pbidcblxuZXhwb3J0IGNvbnN0IFBhZ2VzOiBDb2xsZWN0aW9uQ29uZmlnID0ge1xuICBzbHVnOiAncGFnZXMnLFxuICBhY2Nlc3M6IHtcbiAgICBjcmVhdGU6IHN1cGVyQWRtaW5PclRlbmFudEFkbWluQWNjZXNzLFxuICAgIGRlbGV0ZTogc3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3MsXG4gICAgcmVhZDogKCkgPT4gdHJ1ZSxcbiAgICB1cGRhdGU6IHN1cGVyQWRtaW5PclRlbmFudEFkbWluQWNjZXNzLFxuICB9LFxuICBhZG1pbjoge1xuICAgIHVzZUFzVGl0bGU6ICd0aXRsZScsXG4gIH0sXG4gIGZpZWxkczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc2x1ZycsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBkZWZhdWx0VmFsdWU6ICdob21lJyxcbiAgICAgIGhvb2tzOiB7XG4gICAgICAgIGJlZm9yZVZhbGlkYXRlOiBbZW5zdXJlVW5pcXVlU2x1Z10sXG4gICAgICB9LFxuICAgICAgaW5kZXg6IHRydWUsXG4gICAgfSxcbiAgXSxcbn1cbiJdLCJuYW1lcyI6WyJlbnN1cmVVbmlxdWVTbHVnIiwic3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3MiLCJQYWdlcyIsInNsdWciLCJhY2Nlc3MiLCJjcmVhdGUiLCJkZWxldGUiLCJyZWFkIiwidXBkYXRlIiwiYWRtaW4iLCJ1c2VBc1RpdGxlIiwiZmllbGRzIiwibmFtZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJob29rcyIsImJlZm9yZVZhbGlkYXRlIiwiaW5kZXgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Tenants/access/updateAndDelete.ts":
/*!***********************************************************!*\
  !*** ./src/collections/Tenants/access/updateAndDelete.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateAndDeleteAccess: () => (/* binding */ updateAndDeleteAccess)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n\n\nconst updateAndDeleteAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    return {\n        id: {\n            in: (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__.getUserTenantIDs)(req.user, 'tenant-admin')\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9hY2Nlc3MvdXBkYXRlQW5kRGVsZXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUNXO0FBR3hELE1BQU1FLHdCQUFnQyxDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNuRCxJQUFJLENBQUNBLElBQUlDLElBQUksRUFBRTtRQUNiLE9BQU87SUFDVDtJQUVBLElBQUlKLGtFQUFZQSxDQUFDRyxJQUFJQyxJQUFJLEdBQUc7UUFDMUIsT0FBTztJQUNUO0lBRUEsT0FBTztRQUNMQyxJQUFJO1lBQ0ZDLElBQUlMLDZFQUFnQkEsQ0FBQ0UsSUFBSUMsSUFBSSxFQUFFO1FBQ2pDO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9UZW5hbnRzL2FjY2Vzcy91cGRhdGVBbmREZWxldGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNTdXBlckFkbWluIH0gZnJvbSAnQC9hY2Nlc3MvaXNTdXBlckFkbWluJ1xuaW1wb3J0IHsgZ2V0VXNlclRlbmFudElEcyB9IGZyb20gJ0AvdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMnXG5pbXBvcnQgeyBBY2Nlc3MgfSBmcm9tICdwYXlsb2FkJ1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQW5kRGVsZXRlQWNjZXNzOiBBY2Nlc3MgPSAoeyByZXEgfSkgPT4ge1xuICBpZiAoIXJlcS51c2VyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoaXNTdXBlckFkbWluKHJlcS51c2VyKSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkOiB7XG4gICAgICBpbjogZ2V0VXNlclRlbmFudElEcyhyZXEudXNlciwgJ3RlbmFudC1hZG1pbicpLFxuICAgIH0sXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJpc1N1cGVyQWRtaW4iLCJnZXRVc2VyVGVuYW50SURzIiwidXBkYXRlQW5kRGVsZXRlQWNjZXNzIiwicmVxIiwidXNlciIsImlkIiwiaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Tenants/access/updateAndDelete.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Tenants/index.ts":
/*!******************************************!*\
  !*** ./src/collections/Tenants/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tenants: () => (/* binding */ Tenants)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/updateAndDelete */ \"(rsc)/./src/collections/Tenants/access/updateAndDelete.ts\");\n\n\nconst Tenants = {\n    slug: 'tenants',\n    access: {\n        create: _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdminAccess,\n        delete: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__.updateAndDeleteAccess,\n        read: ({ req })=>Boolean(req.user),\n        update: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__.updateAndDeleteAccess\n    },\n    admin: {\n        useAsTitle: 'name'\n    },\n    fields: [\n        {\n            name: 'name',\n            type: 'text',\n            required: true\n        },\n        {\n            name: 'domain',\n            type: 'text',\n            admin: {\n                description: 'Used for domain-based tenant handling'\n            }\n        },\n        {\n            name: 'slug',\n            type: 'text',\n            admin: {\n                description: 'Used for url paths, example: /tenant-slug/page-slug'\n            },\n            index: true,\n            required: true\n        },\n        {\n            name: 'allowPublicRead',\n            type: 'checkbox',\n            admin: {\n                description: 'If checked, logging in is not required to read. Useful for building public pages.',\n                position: 'sidebar'\n            },\n            defaultValue: false,\n            index: true\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFMEQ7QUFDTTtBQUV6RCxNQUFNRSxVQUE0QjtJQUN2Q0MsTUFBTTtJQUNOQyxRQUFRO1FBQ05DLFFBQVFMLG9FQUFrQkE7UUFDMUJNLFFBQVFMLDBFQUFxQkE7UUFDN0JNLE1BQU0sQ0FBQyxFQUFFQyxHQUFHLEVBQUUsR0FBS0MsUUFBUUQsSUFBSUUsSUFBSTtRQUNuQ0MsUUFBUVYsMEVBQXFCQTtJQUMvQjtJQUNBVyxPQUFPO1FBQ0xDLFlBQVk7SUFDZDtJQUNBQyxRQUFRO1FBQ047WUFDRUMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLFVBQVU7UUFDWjtRQUNBO1lBQ0VGLE1BQU07WUFDTkMsTUFBTTtZQUNOSixPQUFPO2dCQUNMTSxhQUFhO1lBQ2Y7UUFDRjtRQUNBO1lBQ0VILE1BQU07WUFDTkMsTUFBTTtZQUNOSixPQUFPO2dCQUNMTSxhQUFhO1lBQ2Y7WUFDQUMsT0FBTztZQUNQRixVQUFVO1FBQ1o7UUFDQTtZQUNFRixNQUFNO1lBQ05DLE1BQU07WUFDTkosT0FBTztnQkFDTE0sYUFDRTtnQkFDRkUsVUFBVTtZQUNaO1lBQ0FDLGNBQWM7WUFDZEYsT0FBTztRQUNUO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9UZW5hbnRzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbkNvbmZpZyB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IGlzU3VwZXJBZG1pbkFjY2VzcyB9IGZyb20gJ0AvYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IHVwZGF0ZUFuZERlbGV0ZUFjY2VzcyB9IGZyb20gJy4vYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZSdcblxuZXhwb3J0IGNvbnN0IFRlbmFudHM6IENvbGxlY3Rpb25Db25maWcgPSB7XG4gIHNsdWc6ICd0ZW5hbnRzJyxcbiAgYWNjZXNzOiB7XG4gICAgY3JlYXRlOiBpc1N1cGVyQWRtaW5BY2Nlc3MsXG4gICAgZGVsZXRlOiB1cGRhdGVBbmREZWxldGVBY2Nlc3MsXG4gICAgcmVhZDogKHsgcmVxIH0pID0+IEJvb2xlYW4ocmVxLnVzZXIpLFxuICAgIHVwZGF0ZTogdXBkYXRlQW5kRGVsZXRlQWNjZXNzLFxuICB9LFxuICBhZG1pbjoge1xuICAgIHVzZUFzVGl0bGU6ICduYW1lJyxcbiAgfSxcbiAgZmllbGRzOiBbXG4gICAge1xuICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZG9tYWluJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIGFkbWluOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlZCBmb3IgZG9tYWluLWJhc2VkIHRlbmFudCBoYW5kbGluZycsXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3NsdWcnLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgYWRtaW46IHtcbiAgICAgICAgZGVzY3JpcHRpb246ICdVc2VkIGZvciB1cmwgcGF0aHMsIGV4YW1wbGU6IC90ZW5hbnQtc2x1Zy9wYWdlLXNsdWcnLFxuICAgICAgfSxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYWxsb3dQdWJsaWNSZWFkJyxcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBhZG1pbjoge1xuICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAnSWYgY2hlY2tlZCwgbG9nZ2luZyBpbiBpcyBub3QgcmVxdWlyZWQgdG8gcmVhZC4gVXNlZnVsIGZvciBidWlsZGluZyBwdWJsaWMgcGFnZXMuJyxcbiAgICAgICAgcG9zaXRpb246ICdzaWRlYmFyJyxcbiAgICAgIH0sXG4gICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgaW5kZXg6IHRydWUsXG4gICAgfSxcbiAgXSxcbn1cbiJdLCJuYW1lcyI6WyJpc1N1cGVyQWRtaW5BY2Nlc3MiLCJ1cGRhdGVBbmREZWxldGVBY2Nlc3MiLCJUZW5hbnRzIiwic2x1ZyIsImFjY2VzcyIsImNyZWF0ZSIsImRlbGV0ZSIsInJlYWQiLCJyZXEiLCJCb29sZWFuIiwidXNlciIsInVwZGF0ZSIsImFkbWluIiwidXNlQXNUaXRsZSIsImZpZWxkcyIsIm5hbWUiLCJ0eXBlIiwicmVxdWlyZWQiLCJkZXNjcmlwdGlvbiIsImluZGV4IiwicG9zaXRpb24iLCJkZWZhdWx0VmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Tenants/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/create.ts":
/*!************************************************!*\
  !*** ./src/collections/Users/access/create.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccess: () => (/* binding */ createAccess)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n\n\nconst createAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    const adminTenantAccessIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__.getUserTenantIDs)(req.user, 'tenant-admin');\n    if (adminTenantAccessIDs.length) {\n        return true;\n    }\n    return false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2NyZWF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFJMkQ7QUFDVztBQUUvRCxNQUFNRSxlQUE2QixDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNoRCxJQUFJLENBQUNBLElBQUlDLElBQUksRUFBRTtRQUNiLE9BQU87SUFDVDtJQUVBLElBQUlKLGtFQUFZQSxDQUFDRyxJQUFJQyxJQUFJLEdBQUc7UUFDMUIsT0FBTztJQUNUO0lBRUEsTUFBTUMsdUJBQXVCSiw2RUFBZ0JBLENBQUNFLElBQUlDLElBQUksRUFBRTtJQUV4RCxJQUFJQyxxQkFBcUJDLE1BQU0sRUFBRTtRQUMvQixPQUFPO0lBQ1Q7SUFFQSxPQUFPO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2NyZWF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY2VzcyB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB0eXBlIHsgVXNlciB9IGZyb20gJy4uLy4uLy4uL3BheWxvYWQtdHlwZXMnXG5cbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMnXG5cbmV4cG9ydCBjb25zdCBjcmVhdGVBY2Nlc3M6IEFjY2VzczxVc2VyPiA9ICh7IHJlcSB9KSA9PiB7XG4gIGlmICghcmVxLnVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc1N1cGVyQWRtaW4ocmVxLnVzZXIpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0IGFkbWluVGVuYW50QWNjZXNzSURzID0gZ2V0VXNlclRlbmFudElEcyhyZXEudXNlciwgJ3RlbmFudC1hZG1pbicpXG5cbiAgaWYgKGFkbWluVGVuYW50QWNjZXNzSURzLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cbiJdLCJuYW1lcyI6WyJpc1N1cGVyQWRtaW4iLCJnZXRVc2VyVGVuYW50SURzIiwiY3JlYXRlQWNjZXNzIiwicmVxIiwidXNlciIsImFkbWluVGVuYW50QWNjZXNzSURzIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/create.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/isAccessingSelf.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Users/access/isAccessingSelf.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAccessingSelf: () => (/* binding */ isAccessingSelf)\n/* harmony export */ });\nconst isAccessingSelf = ({ id, user })=>{\n    return user ? Boolean(user.id === id) : false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2lzQWNjZXNzaW5nU2VsZi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsa0JBQWtCLENBQUMsRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQXlDO0lBQ2pGLE9BQU9BLE9BQU9DLFFBQVFELEtBQUtELEVBQUUsS0FBS0EsTUFBTTtBQUMxQyxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9hY2Nlc3MvaXNBY2Nlc3NpbmdTZWxmLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVzZXIgfSBmcm9tICdAL3BheWxvYWQtdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBpc0FjY2Vzc2luZ1NlbGYgPSAoeyBpZCwgdXNlciB9OiB7IHVzZXI/OiBVc2VyOyBpZD86IHN0cmluZyB8IG51bWJlciB9KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB1c2VyID8gQm9vbGVhbih1c2VyLmlkID09PSBpZCkgOiBmYWxzZVxufVxuIl0sIm5hbWVzIjpbImlzQWNjZXNzaW5nU2VsZiIsImlkIiwidXNlciIsIkJvb2xlYW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/isAccessingSelf.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/read.ts":
/*!**********************************************!*\
  !*** ./src/collections/Users/access/read.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   readAccess: () => (/* binding */ readAccess)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/utilities */ \"(rsc)/./node_modules/@payloadcms/plugin-multi-tenant/dist/exports/utilities.js\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _isAccessingSelf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isAccessingSelf */ \"(rsc)/./src/collections/Users/access/isAccessingSelf.ts\");\n/* harmony import */ var _utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utilities/getCollectionIDType */ \"(rsc)/./src/utilities/getCollectionIDType.ts\");\n\n\n\n\n\nconst readAccess = ({ req, id })=>{\n    if (!req?.user) {\n        return false;\n    }\n    if ((0,_isAccessingSelf__WEBPACK_IMPORTED_MODULE_3__.isAccessingSelf)({\n        id,\n        user: req.user\n    })) {\n        return true;\n    }\n    const superAdmin = (0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__.isSuperAdmin)(req.user);\n    const selectedTenant = (0,_payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_0__.getTenantFromCookie)(req.headers, (0,_utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_4__.getCollectionIDType)({\n        payload: req.payload,\n        collectionSlug: 'tenants'\n    }));\n    const adminTenantAccessIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_2__.getUserTenantIDs)(req.user, 'tenant-admin');\n    if (selectedTenant) {\n        // If it's a super admin, or they have access to the tenant ID set in cookie\n        const hasTenantAccess = adminTenantAccessIDs.some((id)=>id === selectedTenant);\n        if (superAdmin || hasTenantAccess) {\n            return {\n                'tenants.tenant': {\n                    equals: selectedTenant\n                }\n            };\n        }\n    }\n    if (superAdmin) {\n        return true;\n    }\n    return {\n        or: [\n            {\n                id: {\n                    equals: req.user.id\n                }\n            },\n            {\n                'tenants.tenant': {\n                    in: adminTenantAccessIDs\n                }\n            }\n        ]\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3JlYWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRStFO0FBRXBCO0FBQ1c7QUFDbkI7QUFDa0I7QUFFOUQsTUFBTUssYUFBMkIsQ0FBQyxFQUFFQyxHQUFHLEVBQUVDLEVBQUUsRUFBRTtJQUNsRCxJQUFJLENBQUNELEtBQUtFLE1BQU07UUFDZCxPQUFPO0lBQ1Q7SUFFQSxJQUFJTCxpRUFBZUEsQ0FBQztRQUFFSTtRQUFJQyxNQUFNRixJQUFJRSxJQUFJO0lBQUMsSUFBSTtRQUMzQyxPQUFPO0lBQ1Q7SUFFQSxNQUFNQyxhQUFhUixrRUFBWUEsQ0FBQ0ssSUFBSUUsSUFBSTtJQUN4QyxNQUFNRSxpQkFBaUJWLDhGQUFtQkEsQ0FDeENNLElBQUlLLE9BQU8sRUFDWFAsbUZBQW1CQSxDQUFDO1FBQUVRLFNBQVNOLElBQUlNLE9BQU87UUFBRUMsZ0JBQWdCO0lBQVU7SUFFeEUsTUFBTUMsdUJBQXVCWiw2RUFBZ0JBLENBQUNJLElBQUlFLElBQUksRUFBRTtJQUV4RCxJQUFJRSxnQkFBZ0I7UUFDbEIsNEVBQTRFO1FBQzVFLE1BQU1LLGtCQUFrQkQscUJBQXFCRSxJQUFJLENBQUMsQ0FBQ1QsS0FBT0EsT0FBT0c7UUFDakUsSUFBSUQsY0FBY00saUJBQWlCO1lBQ2pDLE9BQU87Z0JBQ0wsa0JBQWtCO29CQUNoQkUsUUFBUVA7Z0JBQ1Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxJQUFJRCxZQUFZO1FBQ2QsT0FBTztJQUNUO0lBRUEsT0FBTztRQUNMUyxJQUFJO1lBQ0Y7Z0JBQ0VYLElBQUk7b0JBQ0ZVLFFBQVFYLElBQUlFLElBQUksQ0FBQ0QsRUFBRTtnQkFDckI7WUFDRjtZQUNBO2dCQUNFLGtCQUFrQjtvQkFDaEJZLElBQUlMO2dCQUNOO1lBQ0Y7U0FDRDtJQUNIO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3JlYWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBVc2VyIH0gZnJvbSAnQC9wYXlsb2FkLXR5cGVzJ1xuaW1wb3J0IHR5cGUgeyBBY2Nlc3MsIFdoZXJlIH0gZnJvbSAncGF5bG9hZCdcbmltcG9ydCB7IGdldFRlbmFudEZyb21Db29raWUgfSBmcm9tICdAcGF5bG9hZGNtcy9wbHVnaW4tbXVsdGktdGVuYW50L3V0aWxpdGllcydcblxuaW1wb3J0IHsgaXNTdXBlckFkbWluIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IGlzQWNjZXNzaW5nU2VsZiB9IGZyb20gJy4vaXNBY2Nlc3NpbmdTZWxmJ1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbklEVHlwZSB9IGZyb20gJ0AvdXRpbGl0aWVzL2dldENvbGxlY3Rpb25JRFR5cGUnXG5cbmV4cG9ydCBjb25zdCByZWFkQWNjZXNzOiBBY2Nlc3M8VXNlcj4gPSAoeyByZXEsIGlkIH0pID0+IHtcbiAgaWYgKCFyZXE/LnVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc0FjY2Vzc2luZ1NlbGYoeyBpZCwgdXNlcjogcmVxLnVzZXIgfSkpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3Qgc3VwZXJBZG1pbiA9IGlzU3VwZXJBZG1pbihyZXEudXNlcilcbiAgY29uc3Qgc2VsZWN0ZWRUZW5hbnQgPSBnZXRUZW5hbnRGcm9tQ29va2llKFxuICAgIHJlcS5oZWFkZXJzLFxuICAgIGdldENvbGxlY3Rpb25JRFR5cGUoeyBwYXlsb2FkOiByZXEucGF5bG9hZCwgY29sbGVjdGlvblNsdWc6ICd0ZW5hbnRzJyB9KSxcbiAgKVxuICBjb25zdCBhZG1pblRlbmFudEFjY2Vzc0lEcyA9IGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIsICd0ZW5hbnQtYWRtaW4nKVxuXG4gIGlmIChzZWxlY3RlZFRlbmFudCkge1xuICAgIC8vIElmIGl0J3MgYSBzdXBlciBhZG1pbiwgb3IgdGhleSBoYXZlIGFjY2VzcyB0byB0aGUgdGVuYW50IElEIHNldCBpbiBjb29raWVcbiAgICBjb25zdCBoYXNUZW5hbnRBY2Nlc3MgPSBhZG1pblRlbmFudEFjY2Vzc0lEcy5zb21lKChpZCkgPT4gaWQgPT09IHNlbGVjdGVkVGVuYW50KVxuICAgIGlmIChzdXBlckFkbWluIHx8IGhhc1RlbmFudEFjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgICAgIGVxdWFsczogc2VsZWN0ZWRUZW5hbnQsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cGVyQWRtaW4pIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcjogW1xuICAgICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAndGVuYW50cy50ZW5hbnQnOiB7XG4gICAgICAgICAgaW46IGFkbWluVGVuYW50QWNjZXNzSURzLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9IGFzIFdoZXJlXG59XG4iXSwibmFtZXMiOlsiZ2V0VGVuYW50RnJvbUNvb2tpZSIsImlzU3VwZXJBZG1pbiIsImdldFVzZXJUZW5hbnRJRHMiLCJpc0FjY2Vzc2luZ1NlbGYiLCJnZXRDb2xsZWN0aW9uSURUeXBlIiwicmVhZEFjY2VzcyIsInJlcSIsImlkIiwidXNlciIsInN1cGVyQWRtaW4iLCJzZWxlY3RlZFRlbmFudCIsImhlYWRlcnMiLCJwYXlsb2FkIiwiY29sbGVjdGlvblNsdWciLCJhZG1pblRlbmFudEFjY2Vzc0lEcyIsImhhc1RlbmFudEFjY2VzcyIsInNvbWUiLCJlcXVhbHMiLCJvciIsImluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/read.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/updateAndDelete.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Users/access/updateAndDelete.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateAndDeleteAccess: () => (/* binding */ updateAndDeleteAccess)\n/* harmony export */ });\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isAccessingSelf */ \"(rsc)/./src/collections/Users/access/isAccessingSelf.ts\");\n\n\n\nconst updateAndDeleteAccess = ({ req, id })=>{\n    const { user } = req;\n    if (!user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__.isSuperAdmin)(user) || (0,_isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__.isAccessingSelf)({\n        user,\n        id\n    })) {\n        return true;\n    }\n    /**\n   * Constrains update and delete access to users that belong\n   * to the same tenant as the tenant-admin making the request\n   *\n   * You may want to take this a step further with a beforeChange\n   * hook to ensure that the a tenant-admin can only remove users\n   * from their own tenant in the tenants array.\n   */ return {\n        'tenants.tenant': {\n            in: (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(user, 'tenant-admin')\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXNFO0FBQ2xCO0FBQ0Q7QUFFNUMsTUFBTUcsd0JBQWdDLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxFQUFFLEVBQUU7SUFDdkQsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0Y7SUFFakIsSUFBSSxDQUFDRSxNQUFNO1FBQ1QsT0FBTztJQUNUO0lBRUEsSUFBSUwsa0VBQVlBLENBQUNLLFNBQVNKLGlFQUFlQSxDQUFDO1FBQUVJO1FBQU1EO0lBQUcsSUFBSTtRQUN2RCxPQUFPO0lBQ1Q7SUFFQTs7Ozs7OztHQU9DLEdBQ0QsT0FBTztRQUNMLGtCQUFrQjtZQUNoQkUsSUFBSVAsNkVBQWdCQSxDQUFDTSxNQUFNO1FBQzdCO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9hY2Nlc3MvdXBkYXRlQW5kRGVsZXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQWNjZXNzIH0gZnJvbSAncGF5bG9hZCdcblxuaW1wb3J0IHsgZ2V0VXNlclRlbmFudElEcyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzJ1xuaW1wb3J0IHsgaXNTdXBlckFkbWluIH0gZnJvbSAnQC9hY2Nlc3MvaXNTdXBlckFkbWluJ1xuaW1wb3J0IHsgaXNBY2Nlc3NpbmdTZWxmIH0gZnJvbSAnLi9pc0FjY2Vzc2luZ1NlbGYnXG5cbmV4cG9ydCBjb25zdCB1cGRhdGVBbmREZWxldGVBY2Nlc3M6IEFjY2VzcyA9ICh7IHJlcSwgaWQgfSkgPT4ge1xuICBjb25zdCB7IHVzZXIgfSA9IHJlcVxuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGlzU3VwZXJBZG1pbih1c2VyKSB8fCBpc0FjY2Vzc2luZ1NlbGYoeyB1c2VyLCBpZCB9KSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogQ29uc3RyYWlucyB1cGRhdGUgYW5kIGRlbGV0ZSBhY2Nlc3MgdG8gdXNlcnMgdGhhdCBiZWxvbmdcbiAgICogdG8gdGhlIHNhbWUgdGVuYW50IGFzIHRoZSB0ZW5hbnQtYWRtaW4gbWFraW5nIHRoZSByZXF1ZXN0XG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byB0YWtlIHRoaXMgYSBzdGVwIGZ1cnRoZXIgd2l0aCBhIGJlZm9yZUNoYW5nZVxuICAgKiBob29rIHRvIGVuc3VyZSB0aGF0IHRoZSBhIHRlbmFudC1hZG1pbiBjYW4gb25seSByZW1vdmUgdXNlcnNcbiAgICogZnJvbSB0aGVpciBvd24gdGVuYW50IGluIHRoZSB0ZW5hbnRzIGFycmF5LlxuICAgKi9cbiAgcmV0dXJuIHtcbiAgICAndGVuYW50cy50ZW5hbnQnOiB7XG4gICAgICBpbjogZ2V0VXNlclRlbmFudElEcyh1c2VyLCAndGVuYW50LWFkbWluJyksXG4gICAgfSxcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldFVzZXJUZW5hbnRJRHMiLCJpc1N1cGVyQWRtaW4iLCJpc0FjY2Vzc2luZ1NlbGYiLCJ1cGRhdGVBbmREZWxldGVBY2Nlc3MiLCJyZXEiLCJpZCIsInVzZXIiLCJpbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/updateAndDelete.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts":
/*!***************************************************************!*\
  !*** ./src/collections/Users/endpoints/externalUsersLogin.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   externalUsersLogin: () => (/* binding */ externalUsersLogin)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_next_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/next/utilities */ \"(rsc)/./node_modules/@payloadcms/next/dist/exports/utilities.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/auth/cookies.js\");\n\n\n// A custom endpoint that can be reached by POST request\n// at: /api/users/external-users/login\nconst externalUsersLogin = {\n    handler: async (req)=>{\n        let data = {};\n        try {\n            if (typeof req.json === 'function') {\n                data = await req.json();\n            }\n        } catch (error) {\n        // swallow error, data is already empty object\n        }\n        const { password, tenantSlug, tenantDomain, username } = data;\n        if (!username || !password) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_1__.APIError('Username and Password are required for login.', 400, null, true);\n        }\n        const fullTenant = (await req.payload.find({\n            collection: 'tenants',\n            where: tenantDomain ? {\n                domain: {\n                    equals: tenantDomain\n                }\n            } : {\n                slug: {\n                    equals: tenantSlug\n                }\n            }\n        })).docs[0];\n        const foundUser = await req.payload.find({\n            collection: 'users',\n            where: {\n                or: [\n                    {\n                        and: [\n                            {\n                                email: {\n                                    equals: username\n                                }\n                            },\n                            {\n                                'tenants.tenant': {\n                                    equals: fullTenant.id\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        and: [\n                            {\n                                username: {\n                                    equals: username\n                                }\n                            },\n                            {\n                                'tenants.tenant': {\n                                    equals: fullTenant.id\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        });\n        if (foundUser.totalDocs > 0) {\n            try {\n                const loginAttempt = await req.payload.login({\n                    collection: 'users',\n                    data: {\n                        email: foundUser.docs[0].email,\n                        password\n                    },\n                    req\n                });\n                if (loginAttempt?.token) {\n                    const collection = req.payload.collections['users'];\n                    const cookie = (0,payload__WEBPACK_IMPORTED_MODULE_2__.generatePayloadCookie)({\n                        collectionAuthConfig: collection.config.auth,\n                        cookiePrefix: req.payload.config.cookiePrefix,\n                        token: loginAttempt.token\n                    });\n                    return Response.json(loginAttempt, {\n                        headers: (0,_payloadcms_next_utilities__WEBPACK_IMPORTED_MODULE_0__.headersWithCors)({\n                            headers: new Headers({\n                                'Set-Cookie': cookie\n                            }),\n                            req\n                        }),\n                        status: 200\n                    });\n                }\n                throw new payload__WEBPACK_IMPORTED_MODULE_1__.APIError('Unable to login with the provided username and password.', 400, null, true);\n            } catch (e) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_1__.APIError('Unable to login with the provided username and password.', 400, null, true);\n            }\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_1__.APIError('Unable to login with the provided username and password.', 400, null, true);\n    },\n    method: 'post',\n    path: '/external-users/login'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvZW5kcG9pbnRzL2V4dGVybmFsVXNlcnNMb2dpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRTREO0FBQ0g7QUFFekQsd0RBQXdEO0FBQ3hELHNDQUFzQztBQUMvQixNQUFNRyxxQkFBK0I7SUFDMUNDLFNBQVMsT0FBT0M7UUFDZCxJQUFJQyxPQUFrQyxDQUFDO1FBRXZDLElBQUk7WUFDRixJQUFJLE9BQU9ELElBQUlFLElBQUksS0FBSyxZQUFZO2dCQUNsQ0QsT0FBTyxNQUFNRCxJQUFJRSxJQUFJO1lBQ3ZCO1FBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2QsOENBQThDO1FBQ2hEO1FBQ0EsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsRUFBRUMsWUFBWSxFQUFFQyxRQUFRLEVBQUUsR0FBR047UUFFekQsSUFBSSxDQUFDTSxZQUFZLENBQUNILFVBQVU7WUFDMUIsTUFBTSxJQUFJUiw2Q0FBUUEsQ0FBQyxpREFBaUQsS0FBSyxNQUFNO1FBQ2pGO1FBRUEsTUFBTVksYUFBYSxDQUNqQixNQUFNUixJQUFJUyxPQUFPLENBQUNDLElBQUksQ0FBQztZQUNyQkMsWUFBWTtZQUNaQyxPQUFPTixlQUNIO2dCQUNFTyxRQUFRO29CQUNOQyxRQUFRUjtnQkFDVjtZQUNGLElBQ0E7Z0JBQ0VTLE1BQU07b0JBQ0pELFFBQVFUO2dCQUNWO1lBQ0Y7UUFDTixFQUFDLEVBQ0RXLElBQUksQ0FBQyxFQUFFO1FBRVQsTUFBTUMsWUFBWSxNQUFNakIsSUFBSVMsT0FBTyxDQUFDQyxJQUFJLENBQUM7WUFDdkNDLFlBQVk7WUFDWkMsT0FBTztnQkFDTE0sSUFBSTtvQkFDRjt3QkFDRUMsS0FBSzs0QkFDSDtnQ0FDRUMsT0FBTztvQ0FDTE4sUUFBUVA7Z0NBQ1Y7NEJBQ0Y7NEJBQ0E7Z0NBQ0Usa0JBQWtCO29DQUNoQk8sUUFBUU4sV0FBV2EsRUFBRTtnQ0FDdkI7NEJBQ0Y7eUJBQ0Q7b0JBQ0g7b0JBQ0E7d0JBQ0VGLEtBQUs7NEJBQ0g7Z0NBQ0VaLFVBQVU7b0NBQ1JPLFFBQVFQO2dDQUNWOzRCQUNGOzRCQUNBO2dDQUNFLGtCQUFrQjtvQ0FDaEJPLFFBQVFOLFdBQVdhLEVBQUU7Z0NBQ3ZCOzRCQUNGO3lCQUNEO29CQUNIO2lCQUNEO1lBQ0g7UUFDRjtRQUVBLElBQUlKLFVBQVVLLFNBQVMsR0FBRyxHQUFHO1lBQzNCLElBQUk7Z0JBQ0YsTUFBTUMsZUFBZSxNQUFNdkIsSUFBSVMsT0FBTyxDQUFDZSxLQUFLLENBQUM7b0JBQzNDYixZQUFZO29CQUNaVixNQUFNO3dCQUNKbUIsT0FBT0gsVUFBVUQsSUFBSSxDQUFDLEVBQUUsQ0FBQ0ksS0FBSzt3QkFDOUJoQjtvQkFDRjtvQkFDQUo7Z0JBQ0Y7Z0JBRUEsSUFBSXVCLGNBQWNFLE9BQU87b0JBQ3ZCLE1BQU1kLGFBQXlCLElBQUtGLE9BQU8sQ0FBQ2lCLFdBQVcsQ0FDckQsUUFDRDtvQkFDRCxNQUFNQyxTQUFTOUIsOERBQXFCQSxDQUFDO3dCQUNuQytCLHNCQUFzQmpCLFdBQVdrQixNQUFNLENBQUNDLElBQUk7d0JBQzVDQyxjQUFjL0IsSUFBSVMsT0FBTyxDQUFDb0IsTUFBTSxDQUFDRSxZQUFZO3dCQUM3Q04sT0FBT0YsYUFBYUUsS0FBSztvQkFDM0I7b0JBRUEsT0FBT08sU0FBUzlCLElBQUksQ0FBQ3FCLGNBQWM7d0JBQ2pDVSxTQUFTdEMsMkVBQWVBLENBQUM7NEJBQ3ZCc0MsU0FBUyxJQUFJQyxRQUFRO2dDQUNuQixjQUFjUDs0QkFDaEI7NEJBQ0EzQjt3QkFDRjt3QkFDQW1DLFFBQVE7b0JBQ1Y7Z0JBQ0Y7Z0JBRUEsTUFBTSxJQUFJdkMsNkNBQVFBLENBQ2hCLDREQUNBLEtBQ0EsTUFDQTtZQUVKLEVBQUUsT0FBT3dDLEdBQUc7Z0JBQ1YsTUFBTSxJQUFJeEMsNkNBQVFBLENBQ2hCLDREQUNBLEtBQ0EsTUFDQTtZQUVKO1FBQ0Y7UUFFQSxNQUFNLElBQUlBLDZDQUFRQSxDQUFDLDREQUE0RCxLQUFLLE1BQU07SUFDNUY7SUFDQXlDLFFBQVE7SUFDUkMsTUFBTTtBQUNSLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL2NvbGxlY3Rpb25zL1VzZXJzL2VuZHBvaW50cy9leHRlcm5hbFVzZXJzTG9naW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uLCBFbmRwb2ludCB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IGhlYWRlcnNXaXRoQ29ycyB9IGZyb20gJ0BwYXlsb2FkY21zL25leHQvdXRpbGl0aWVzJ1xuaW1wb3J0IHsgQVBJRXJyb3IsIGdlbmVyYXRlUGF5bG9hZENvb2tpZSB9IGZyb20gJ3BheWxvYWQnXG5cbi8vIEEgY3VzdG9tIGVuZHBvaW50IHRoYXQgY2FuIGJlIHJlYWNoZWQgYnkgUE9TVCByZXF1ZXN0XG4vLyBhdDogL2FwaS91c2Vycy9leHRlcm5hbC11c2Vycy9sb2dpblxuZXhwb3J0IGNvbnN0IGV4dGVybmFsVXNlcnNMb2dpbjogRW5kcG9pbnQgPSB7XG4gIGhhbmRsZXI6IGFzeW5jIChyZXEpID0+IHtcbiAgICBsZXQgZGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiByZXEuanNvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVxLmpzb24oKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBzd2FsbG93IGVycm9yLCBkYXRhIGlzIGFscmVhZHkgZW1wdHkgb2JqZWN0XG4gICAgfVxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIHRlbmFudFNsdWcsIHRlbmFudERvbWFpbiwgdXNlcm5hbWUgfSA9IGRhdGFcblxuICAgIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoJ1VzZXJuYW1lIGFuZCBQYXNzd29yZCBhcmUgcmVxdWlyZWQgZm9yIGxvZ2luLicsIDQwMCwgbnVsbCwgdHJ1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBmdWxsVGVuYW50ID0gKFxuICAgICAgYXdhaXQgcmVxLnBheWxvYWQuZmluZCh7XG4gICAgICAgIGNvbGxlY3Rpb246ICd0ZW5hbnRzJyxcbiAgICAgICAgd2hlcmU6IHRlbmFudERvbWFpblxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBkb21haW46IHtcbiAgICAgICAgICAgICAgICBlcXVhbHM6IHRlbmFudERvbWFpbixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgc2x1Zzoge1xuICAgICAgICAgICAgICAgIGVxdWFsczogdGVuYW50U2x1ZyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICB9KVxuICAgICkuZG9jc1swXVxuXG4gICAgY29uc3QgZm91bmRVc2VyID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZCh7XG4gICAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxuICAgICAgd2hlcmU6IHtcbiAgICAgICAgb3I6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhbmQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgICBlcXVhbHM6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAndGVuYW50cy50ZW5hbnQnOiB7XG4gICAgICAgICAgICAgICAgICBlcXVhbHM6IGZ1bGxUZW5hbnQuaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhbmQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB7XG4gICAgICAgICAgICAgICAgICBlcXVhbHM6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAndGVuYW50cy50ZW5hbnQnOiB7XG4gICAgICAgICAgICAgICAgICBlcXVhbHM6IGZ1bGxUZW5hbnQuaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGlmIChmb3VuZFVzZXIudG90YWxEb2NzID4gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbG9naW5BdHRlbXB0ID0gYXdhaXQgcmVxLnBheWxvYWQubG9naW4oe1xuICAgICAgICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZW1haWw6IGZvdW5kVXNlci5kb2NzWzBdLmVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXEsXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGxvZ2luQXR0ZW1wdD8udG9rZW4pIHtcbiAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gKHJlcS5wYXlsb2FkLmNvbGxlY3Rpb25zIGFzIHsgW2tleTogc3RyaW5nXTogQ29sbGVjdGlvbiB9KVtcbiAgICAgICAgICAgICd1c2VycydcbiAgICAgICAgICBdXG4gICAgICAgICAgY29uc3QgY29va2llID0gZ2VuZXJhdGVQYXlsb2FkQ29va2llKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25BdXRoQ29uZmlnOiBjb2xsZWN0aW9uLmNvbmZpZy5hdXRoLFxuICAgICAgICAgICAgY29va2llUHJlZml4OiByZXEucGF5bG9hZC5jb25maWcuY29va2llUHJlZml4LFxuICAgICAgICAgICAgdG9rZW46IGxvZ2luQXR0ZW1wdC50b2tlbixcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24obG9naW5BdHRlbXB0LCB7XG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzV2l0aENvcnMoe1xuICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAgICAgICAgICAgJ1NldC1Db29raWUnOiBjb29raWUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXG4gICAgICAgICAgJ1VuYWJsZSB0byBsb2dpbiB3aXRoIHRoZSBwcm92aWRlZCB1c2VybmFtZSBhbmQgcGFzc3dvcmQuJyxcbiAgICAgICAgICA0MDAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcbiAgICAgICAgICAnVW5hYmxlIHRvIGxvZ2luIHdpdGggdGhlIHByb3ZpZGVkIHVzZXJuYW1lIGFuZCBwYXNzd29yZC4nLFxuICAgICAgICAgIDQwMCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoJ1VuYWJsZSB0byBsb2dpbiB3aXRoIHRoZSBwcm92aWRlZCB1c2VybmFtZSBhbmQgcGFzc3dvcmQuJywgNDAwLCBudWxsLCB0cnVlKVxuICB9LFxuICBtZXRob2Q6ICdwb3N0JyxcbiAgcGF0aDogJy9leHRlcm5hbC11c2Vycy9sb2dpbicsXG59XG4iXSwibmFtZXMiOlsiaGVhZGVyc1dpdGhDb3JzIiwiQVBJRXJyb3IiLCJnZW5lcmF0ZVBheWxvYWRDb29raWUiLCJleHRlcm5hbFVzZXJzTG9naW4iLCJoYW5kbGVyIiwicmVxIiwiZGF0YSIsImpzb24iLCJlcnJvciIsInBhc3N3b3JkIiwidGVuYW50U2x1ZyIsInRlbmFudERvbWFpbiIsInVzZXJuYW1lIiwiZnVsbFRlbmFudCIsInBheWxvYWQiLCJmaW5kIiwiY29sbGVjdGlvbiIsIndoZXJlIiwiZG9tYWluIiwiZXF1YWxzIiwic2x1ZyIsImRvY3MiLCJmb3VuZFVzZXIiLCJvciIsImFuZCIsImVtYWlsIiwiaWQiLCJ0b3RhbERvY3MiLCJsb2dpbkF0dGVtcHQiLCJsb2dpbiIsInRva2VuIiwiY29sbGVjdGlvbnMiLCJjb29raWUiLCJjb2xsZWN0aW9uQXV0aENvbmZpZyIsImNvbmZpZyIsImF1dGgiLCJjb29raWVQcmVmaXgiLCJSZXNwb25zZSIsImhlYWRlcnMiLCJIZWFkZXJzIiwic3RhdHVzIiwiZSIsIm1ldGhvZCIsInBhdGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts":
/*!*************************************************************!*\
  !*** ./src/collections/Users/hooks/ensureUniqueUsername.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUniqueUsername: () => (/* binding */ ensureUniqueUsername)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/errors/ValidationError.js\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/utilities */ \"(rsc)/./node_modules/@payloadcms/plugin-multi-tenant/dist/exports/utilities.js\");\n/* harmony import */ var _utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utilities/getCollectionIDType */ \"(rsc)/./src/utilities/getCollectionIDType.ts\");\n\n\n\n\nconst ensureUniqueUsername = async ({ data, originalDoc, req, value })=>{\n    // if value is unchanged, skip validation\n    if (originalDoc.username === value) {\n        return value;\n    }\n    const constraints = [\n        {\n            username: {\n                equals: value\n            }\n        }\n    ];\n    const selectedTenant = (0,_payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_1__.getTenantFromCookie)(req.headers, (0,_utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_2__.getCollectionIDType)({\n        payload: req.payload,\n        collectionSlug: 'tenants'\n    }));\n    if (selectedTenant) {\n        constraints.push({\n            'tenants.tenant': {\n                equals: selectedTenant\n            }\n        });\n    }\n    const findDuplicateUsers = await req.payload.find({\n        collection: 'users',\n        where: {\n            and: constraints\n        }\n    });\n    if (findDuplicateUsers.docs.length > 0 && req.user) {\n        const tenantIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user);\n        // if the user is an admin or has access to more than 1 tenant\n        // provide a more specific error message\n        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n            const attemptedTenantChange = await req.payload.findByID({\n                // @ts-ignore - selectedTenant will match DB ID type\n                id: selectedTenant,\n                collection: 'tenants'\n            });\n            throw new payload__WEBPACK_IMPORTED_MODULE_3__.ValidationError({\n                errors: [\n                    {\n                        message: `The \"${attemptedTenantChange.name}\" tenant already has a user with the username \"${value}\". Usernames must be unique per tenant.`,\n                        path: 'username'\n                    }\n                ]\n            });\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_3__.ValidationError({\n            errors: [\n                {\n                    message: `A user with the username ${value} already exists. Usernames must be unique per tenant.`,\n                    path: 'username'\n                }\n            ]\n        });\n    }\n    return value;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaG9va3MvZW5zdXJlVW5pcXVlVXNlcm5hbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFeUM7QUFFNkI7QUFFUztBQUNWO0FBRTlELE1BQU1JLHVCQUFrQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRTtJQUNyRix5Q0FBeUM7SUFDekMsSUFBSUYsWUFBWUcsUUFBUSxLQUFLRCxPQUFPO1FBQ2xDLE9BQU9BO0lBQ1Q7SUFFQSxNQUFNRSxjQUF1QjtRQUMzQjtZQUNFRCxVQUFVO2dCQUNSRSxRQUFRSDtZQUNWO1FBQ0Y7S0FDRDtJQUVELE1BQU1JLGlCQUFpQlYsOEZBQW1CQSxDQUN4Q0ssSUFBSU0sT0FBTyxFQUNYVixtRkFBbUJBLENBQUM7UUFBRVcsU0FBU1AsSUFBSU8sT0FBTztRQUFFQyxnQkFBZ0I7SUFBVTtJQUd4RSxJQUFJSCxnQkFBZ0I7UUFDbEJGLFlBQVlNLElBQUksQ0FBQztZQUNmLGtCQUFrQjtnQkFDaEJMLFFBQVFDO1lBQ1Y7UUFDRjtJQUNGO0lBRUEsTUFBTUsscUJBQXFCLE1BQU1WLElBQUlPLE9BQU8sQ0FBQ0ksSUFBSSxDQUFDO1FBQ2hEQyxZQUFZO1FBQ1pDLE9BQU87WUFDTEMsS0FBS1g7UUFDUDtJQUNGO0lBRUEsSUFBSU8sbUJBQW1CSyxJQUFJLENBQUNDLE1BQU0sR0FBRyxLQUFLaEIsSUFBSWlCLElBQUksRUFBRTtRQUNsRCxNQUFNQyxZQUFZeEIsNkVBQWdCQSxDQUFDTSxJQUFJaUIsSUFBSTtRQUMzQyw4REFBOEQ7UUFDOUQsd0NBQXdDO1FBQ3hDLElBQUlqQixJQUFJaUIsSUFBSSxDQUFDRSxLQUFLLEVBQUVDLFNBQVMsa0JBQWtCRixVQUFVRixNQUFNLEdBQUcsR0FBRztZQUNuRSxNQUFNSyx3QkFBd0IsTUFBTXJCLElBQUlPLE9BQU8sQ0FBQ2UsUUFBUSxDQUFDO2dCQUN2RCxvREFBb0Q7Z0JBQ3BEQyxJQUFJbEI7Z0JBQ0pPLFlBQVk7WUFDZDtZQUVBLE1BQU0sSUFBSW5CLG9EQUFlQSxDQUFDO2dCQUN4QitCLFFBQVE7b0JBQ047d0JBQ0VDLFNBQVMsQ0FBQyxLQUFLLEVBQUVKLHNCQUFzQkssSUFBSSxDQUFDLCtDQUErQyxFQUFFekIsTUFBTSx1Q0FBdUMsQ0FBQzt3QkFDM0kwQixNQUFNO29CQUNSO2lCQUNEO1lBQ0g7UUFDRjtRQUVBLE1BQU0sSUFBSWxDLG9EQUFlQSxDQUFDO1lBQ3hCK0IsUUFBUTtnQkFDTjtvQkFDRUMsU0FBUyxDQUFDLHlCQUF5QixFQUFFeEIsTUFBTSxxREFBcUQsQ0FBQztvQkFDakcwQixNQUFNO2dCQUNSO2FBQ0Q7UUFDSDtJQUNGO0lBRUEsT0FBTzFCO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaG9va3MvZW5zdXJlVW5pcXVlVXNlcm5hbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBGaWVsZEhvb2ssIFdoZXJlIH0gZnJvbSAncGF5bG9hZCdcblxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAncGF5bG9hZCdcblxuaW1wb3J0IHsgZ2V0VXNlclRlbmFudElEcyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzJ1xuaW1wb3J0IHsgZXh0cmFjdElEIH0gZnJvbSAnQC91dGlsaXRpZXMvZXh0cmFjdElEJ1xuaW1wb3J0IHsgZ2V0VGVuYW50RnJvbUNvb2tpZSB9IGZyb20gJ0BwYXlsb2FkY21zL3BsdWdpbi1tdWx0aS10ZW5hbnQvdXRpbGl0aWVzJ1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbklEVHlwZSB9IGZyb20gJ0AvdXRpbGl0aWVzL2dldENvbGxlY3Rpb25JRFR5cGUnXG5cbmV4cG9ydCBjb25zdCBlbnN1cmVVbmlxdWVVc2VybmFtZTogRmllbGRIb29rID0gYXN5bmMgKHsgZGF0YSwgb3JpZ2luYWxEb2MsIHJlcSwgdmFsdWUgfSkgPT4ge1xuICAvLyBpZiB2YWx1ZSBpcyB1bmNoYW5nZWQsIHNraXAgdmFsaWRhdGlvblxuICBpZiAob3JpZ2luYWxEb2MudXNlcm5hbWUgPT09IHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBjb25zdCBjb25zdHJhaW50czogV2hlcmVbXSA9IFtcbiAgICB7XG4gICAgICB1c2VybmFtZToge1xuICAgICAgICBlcXVhbHM6IHZhbHVlLFxuICAgICAgfSxcbiAgICB9LFxuICBdXG5cbiAgY29uc3Qgc2VsZWN0ZWRUZW5hbnQgPSBnZXRUZW5hbnRGcm9tQ29va2llKFxuICAgIHJlcS5oZWFkZXJzLFxuICAgIGdldENvbGxlY3Rpb25JRFR5cGUoeyBwYXlsb2FkOiByZXEucGF5bG9hZCwgY29sbGVjdGlvblNsdWc6ICd0ZW5hbnRzJyB9KSxcbiAgKVxuXG4gIGlmIChzZWxlY3RlZFRlbmFudCkge1xuICAgIGNvbnN0cmFpbnRzLnB1c2goe1xuICAgICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgICBlcXVhbHM6IHNlbGVjdGVkVGVuYW50LFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgZmluZER1cGxpY2F0ZVVzZXJzID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZCh7XG4gICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICB3aGVyZToge1xuICAgICAgYW5kOiBjb25zdHJhaW50cyxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChmaW5kRHVwbGljYXRlVXNlcnMuZG9jcy5sZW5ndGggPiAwICYmIHJlcS51c2VyKSB7XG4gICAgY29uc3QgdGVuYW50SURzID0gZ2V0VXNlclRlbmFudElEcyhyZXEudXNlcilcbiAgICAvLyBpZiB0aGUgdXNlciBpcyBhbiBhZG1pbiBvciBoYXMgYWNjZXNzIHRvIG1vcmUgdGhhbiAxIHRlbmFudFxuICAgIC8vIHByb3ZpZGUgYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VcbiAgICBpZiAocmVxLnVzZXIucm9sZXM/LmluY2x1ZGVzKCdzdXBlci1hZG1pbicpIHx8IHRlbmFudElEcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBhdHRlbXB0ZWRUZW5hbnRDaGFuZ2UgPSBhd2FpdCByZXEucGF5bG9hZC5maW5kQnlJRCh7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLSBzZWxlY3RlZFRlbmFudCB3aWxsIG1hdGNoIERCIElEIHR5cGVcbiAgICAgICAgaWQ6IHNlbGVjdGVkVGVuYW50LFxuICAgICAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgICB9KVxuXG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKHtcbiAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogYFRoZSBcIiR7YXR0ZW1wdGVkVGVuYW50Q2hhbmdlLm5hbWV9XCIgdGVuYW50IGFscmVhZHkgaGFzIGEgdXNlciB3aXRoIHRoZSB1c2VybmFtZSBcIiR7dmFsdWV9XCIuIFVzZXJuYW1lcyBtdXN0IGJlIHVuaXF1ZSBwZXIgdGVuYW50LmAsXG4gICAgICAgICAgICBwYXRoOiAndXNlcm5hbWUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3Ioe1xuICAgICAgZXJyb3JzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBtZXNzYWdlOiBgQSB1c2VyIHdpdGggdGhlIHVzZXJuYW1lICR7dmFsdWV9IGFscmVhZHkgZXhpc3RzLiBVc2VybmFtZXMgbXVzdCBiZSB1bmlxdWUgcGVyIHRlbmFudC5gLFxuICAgICAgICAgIHBhdGg6ICd1c2VybmFtZScsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gdmFsdWVcbn1cbiJdLCJuYW1lcyI6WyJWYWxpZGF0aW9uRXJyb3IiLCJnZXRVc2VyVGVuYW50SURzIiwiZ2V0VGVuYW50RnJvbUNvb2tpZSIsImdldENvbGxlY3Rpb25JRFR5cGUiLCJlbnN1cmVVbmlxdWVVc2VybmFtZSIsImRhdGEiLCJvcmlnaW5hbERvYyIsInJlcSIsInZhbHVlIiwidXNlcm5hbWUiLCJjb25zdHJhaW50cyIsImVxdWFscyIsInNlbGVjdGVkVGVuYW50IiwiaGVhZGVycyIsInBheWxvYWQiLCJjb2xsZWN0aW9uU2x1ZyIsInB1c2giLCJmaW5kRHVwbGljYXRlVXNlcnMiLCJmaW5kIiwiY29sbGVjdGlvbiIsIndoZXJlIiwiYW5kIiwiZG9jcyIsImxlbmd0aCIsInVzZXIiLCJ0ZW5hbnRJRHMiLCJyb2xlcyIsImluY2x1ZGVzIiwiYXR0ZW1wdGVkVGVuYW50Q2hhbmdlIiwiZmluZEJ5SUQiLCJpZCIsImVycm9ycyIsIm1lc3NhZ2UiLCJuYW1lIiwicGF0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts":
/*!***************************************************************!*\
  !*** ./src/collections/Users/hooks/setCookieBasedOnDomain.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setCookieBasedOnDomain: () => (/* binding */ setCookieBasedOnDomain)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/auth/cookies.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/utilities/mergeHeaders.js\");\n\nconst setCookieBasedOnDomain = async ({ req, user })=>{\n    const relatedOrg = await req.payload.find({\n        collection: 'tenants',\n        depth: 0,\n        limit: 1,\n        where: {\n            domain: {\n                equals: req.headers.get('host')\n            }\n        }\n    });\n    // If a matching tenant is found, set the 'payload-tenant' cookie\n    if (relatedOrg && relatedOrg.docs.length > 0) {\n        const tenantCookie = (0,payload__WEBPACK_IMPORTED_MODULE_0__.generateCookie)({\n            name: 'payload-tenant',\n            expires: (0,payload__WEBPACK_IMPORTED_MODULE_0__.getCookieExpiration)({\n                seconds: 7200\n            }),\n            path: '/',\n            returnCookieAsObject: false,\n            value: String(relatedOrg.docs[0].id)\n        });\n        // Merge existing responseHeaders with the new Set-Cookie header\n        const newHeaders = new Headers({\n            'Set-Cookie': tenantCookie\n        });\n        // Ensure you merge existing response headers if they already exist\n        req.responseHeaders = req.responseHeaders ? (0,payload__WEBPACK_IMPORTED_MODULE_1__.mergeHeaders)(req.responseHeaders, newHeaders) : newHeaders;\n    }\n    return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaG9va3Mvc2V0Q29va2llQmFzZWRPbkRvbWFpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFMkU7QUFFcEUsTUFBTUcseUJBQW1ELE9BQU8sRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDbEYsTUFBTUMsYUFBYSxNQUFNRixJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQztRQUN4Q0MsWUFBWTtRQUNaQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztZQUNMQyxRQUFRO2dCQUNOQyxRQUFRVixJQUFJVyxPQUFPLENBQUNDLEdBQUcsQ0FBQztZQUMxQjtRQUNGO0lBQ0Y7SUFFQSxpRUFBaUU7SUFDakUsSUFBSVYsY0FBY0EsV0FBV1csSUFBSSxDQUFDQyxNQUFNLEdBQUcsR0FBRztRQUM1QyxNQUFNQyxlQUFlbEIsdURBQWNBLENBQUM7WUFDbENtQixNQUFNO1lBQ05DLFNBQVNuQiw0REFBbUJBLENBQUM7Z0JBQUVvQixTQUFTO1lBQUs7WUFDN0NDLE1BQU07WUFDTkMsc0JBQXNCO1lBQ3RCQyxPQUFPQyxPQUFPcEIsV0FBV1csSUFBSSxDQUFDLEVBQUUsQ0FBQ1UsRUFBRTtRQUNyQztRQUVBLGdFQUFnRTtRQUNoRSxNQUFNQyxhQUFhLElBQUlDLFFBQVE7WUFDN0IsY0FBY1Y7UUFDaEI7UUFFQSxtRUFBbUU7UUFDbkVmLElBQUkwQixlQUFlLEdBQUcxQixJQUFJMEIsZUFBZSxHQUNyQzlCLHFEQUFZQSxDQUFDSSxJQUFJMEIsZUFBZSxFQUFFRixjQUNsQ0E7SUFDTjtJQUVBLE9BQU92QjtBQUNULEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL2NvbGxlY3Rpb25zL1VzZXJzL2hvb2tzL3NldENvb2tpZUJhc2VkT25Eb21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uQWZ0ZXJMb2dpbkhvb2sgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBtZXJnZUhlYWRlcnMsIGdlbmVyYXRlQ29va2llLCBnZXRDb29raWVFeHBpcmF0aW9uIH0gZnJvbSAncGF5bG9hZCdcblxuZXhwb3J0IGNvbnN0IHNldENvb2tpZUJhc2VkT25Eb21haW46IENvbGxlY3Rpb25BZnRlckxvZ2luSG9vayA9IGFzeW5jICh7IHJlcSwgdXNlciB9KSA9PiB7XG4gIGNvbnN0IHJlbGF0ZWRPcmcgPSBhd2FpdCByZXEucGF5bG9hZC5maW5kKHtcbiAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgZGVwdGg6IDAsXG4gICAgbGltaXQ6IDEsXG4gICAgd2hlcmU6IHtcbiAgICAgIGRvbWFpbjoge1xuICAgICAgICBlcXVhbHM6IHJlcS5oZWFkZXJzLmdldCgnaG9zdCcpLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuXG4gIC8vIElmIGEgbWF0Y2hpbmcgdGVuYW50IGlzIGZvdW5kLCBzZXQgdGhlICdwYXlsb2FkLXRlbmFudCcgY29va2llXG4gIGlmIChyZWxhdGVkT3JnICYmIHJlbGF0ZWRPcmcuZG9jcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgdGVuYW50Q29va2llID0gZ2VuZXJhdGVDb29raWUoe1xuICAgICAgbmFtZTogJ3BheWxvYWQtdGVuYW50JyxcbiAgICAgIGV4cGlyZXM6IGdldENvb2tpZUV4cGlyYXRpb24oeyBzZWNvbmRzOiA3MjAwIH0pLFxuICAgICAgcGF0aDogJy8nLFxuICAgICAgcmV0dXJuQ29va2llQXNPYmplY3Q6IGZhbHNlLFxuICAgICAgdmFsdWU6IFN0cmluZyhyZWxhdGVkT3JnLmRvY3NbMF0uaWQpLFxuICAgIH0pXG5cbiAgICAvLyBNZXJnZSBleGlzdGluZyByZXNwb25zZUhlYWRlcnMgd2l0aCB0aGUgbmV3IFNldC1Db29raWUgaGVhZGVyXG4gICAgY29uc3QgbmV3SGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICdTZXQtQ29va2llJzogdGVuYW50Q29va2llIGFzIHN0cmluZyxcbiAgICB9KVxuXG4gICAgLy8gRW5zdXJlIHlvdSBtZXJnZSBleGlzdGluZyByZXNwb25zZSBoZWFkZXJzIGlmIHRoZXkgYWxyZWFkeSBleGlzdFxuICAgIHJlcS5yZXNwb25zZUhlYWRlcnMgPSByZXEucmVzcG9uc2VIZWFkZXJzXG4gICAgICA/IG1lcmdlSGVhZGVycyhyZXEucmVzcG9uc2VIZWFkZXJzLCBuZXdIZWFkZXJzKVxuICAgICAgOiBuZXdIZWFkZXJzXG4gIH1cblxuICByZXR1cm4gdXNlclxufVxuIl0sIm5hbWVzIjpbIm1lcmdlSGVhZGVycyIsImdlbmVyYXRlQ29va2llIiwiZ2V0Q29va2llRXhwaXJhdGlvbiIsInNldENvb2tpZUJhc2VkT25Eb21haW4iLCJyZXEiLCJ1c2VyIiwicmVsYXRlZE9yZyIsInBheWxvYWQiLCJmaW5kIiwiY29sbGVjdGlvbiIsImRlcHRoIiwibGltaXQiLCJ3aGVyZSIsImRvbWFpbiIsImVxdWFscyIsImhlYWRlcnMiLCJnZXQiLCJkb2NzIiwibGVuZ3RoIiwidGVuYW50Q29va2llIiwibmFtZSIsImV4cGlyZXMiLCJzZWNvbmRzIiwicGF0aCIsInJldHVybkNvb2tpZUFzT2JqZWN0IiwidmFsdWUiLCJTdHJpbmciLCJpZCIsIm5ld0hlYWRlcnMiLCJIZWFkZXJzIiwicmVzcG9uc2VIZWFkZXJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/index.ts":
/*!****************************************!*\
  !*** ./src/collections/Users/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _access_create__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/create */ \"(rsc)/./src/collections/Users/access/create.ts\");\n/* harmony import */ var _access_read__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/read */ \"(rsc)/./src/collections/Users/access/read.ts\");\n/* harmony import */ var _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/updateAndDelete */ \"(rsc)/./src/collections/Users/access/updateAndDelete.ts\");\n/* harmony import */ var _endpoints_externalUsersLogin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./endpoints/externalUsersLogin */ \"(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts\");\n/* harmony import */ var _hooks_ensureUniqueUsername__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hooks/ensureUniqueUsername */ \"(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _hooks_setCookieBasedOnDomain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/setCookieBasedOnDomain */ \"(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant_fields__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/fields */ \"(rsc)/./node_modules/@payloadcms/plugin-multi-tenant/dist/exports/fields.js\");\n\n\n\n\n\n\n\n\nconst defaultTenantArrayField = (0,_payloadcms_plugin_multi_tenant_fields__WEBPACK_IMPORTED_MODULE_7__.tenantsArrayField)({\n    tenantsArrayFieldName: 'tenants',\n    tenantsArrayTenantFieldName: 'tenant',\n    tenantsCollectionSlug: 'tenants',\n    arrayFieldAccess: {},\n    tenantFieldAccess: {},\n    rowFields: [\n        {\n            name: 'roles',\n            type: 'select',\n            defaultValue: [\n                'tenant-viewer'\n            ],\n            hasMany: true,\n            options: [\n                'tenant-admin',\n                'tenant-viewer'\n            ],\n            required: true\n        }\n    ]\n});\nconst Users = {\n    slug: 'users',\n    access: {\n        create: _access_create__WEBPACK_IMPORTED_MODULE_0__.createAccess,\n        delete: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__.updateAndDeleteAccess,\n        read: _access_read__WEBPACK_IMPORTED_MODULE_1__.readAccess,\n        update: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__.updateAndDeleteAccess\n    },\n    admin: {\n        useAsTitle: 'email'\n    },\n    auth: true,\n    endpoints: [\n        _endpoints_externalUsersLogin__WEBPACK_IMPORTED_MODULE_3__.externalUsersLogin\n    ],\n    fields: [\n        {\n            admin: {\n                position: 'sidebar'\n            },\n            name: 'roles',\n            type: 'select',\n            defaultValue: [\n                'user'\n            ],\n            hasMany: true,\n            options: [\n                'super-admin',\n                'user'\n            ],\n            access: {\n                update: ({ req })=>{\n                    return (0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__.isSuperAdmin)(req.user);\n                }\n            }\n        },\n        {\n            name: 'username',\n            type: 'text',\n            hooks: {\n                beforeValidate: [\n                    _hooks_ensureUniqueUsername__WEBPACK_IMPORTED_MODULE_4__.ensureUniqueUsername\n                ]\n            },\n            index: true\n        },\n        {\n            ...defaultTenantArrayField,\n            admin: {\n                ...defaultTenantArrayField?.admin || {},\n                position: 'sidebar'\n            }\n        }\n    ],\n    // The following hook sets a cookie based on the domain a user logs in from.\n    // It checks the domain and matches it to a tenant in the system, then sets\n    // a 'payload-tenant' cookie for that tenant.\n    hooks: {\n        afterLogin: [\n            _hooks_setCookieBasedOnDomain__WEBPACK_IMPORTED_MODULE_6__.setCookieBasedOnDomain\n        ]\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Users);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRThDO0FBQ0o7QUFDc0I7QUFDRztBQUNBO0FBQ2Y7QUFDbUI7QUFDRztBQUUxRSxNQUFNUSwwQkFBMEJELHlGQUFpQkEsQ0FBQztJQUNoREUsdUJBQXVCO0lBQ3ZCQyw2QkFBNkI7SUFDN0JDLHVCQUF1QjtJQUN2QkMsa0JBQWtCLENBQUM7SUFDbkJDLG1CQUFtQixDQUFDO0lBQ3BCQyxXQUFXO1FBQ1Q7WUFDRUMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLGNBQWM7Z0JBQUM7YUFBZ0I7WUFDL0JDLFNBQVM7WUFDVEMsU0FBUztnQkFBQztnQkFBZ0I7YUFBZ0I7WUFDMUNDLFVBQVU7UUFDWjtLQUNEO0FBQ0g7QUFFQSxNQUFNQyxRQUEwQjtJQUM5QkMsTUFBTTtJQUNOQyxRQUFRO1FBQ05DLFFBQVF4Qix3REFBWUE7UUFDcEJ5QixRQUFRdkIsMEVBQXFCQTtRQUM3QndCLE1BQU16QixvREFBVUE7UUFDaEIwQixRQUFRekIsMEVBQXFCQTtJQUMvQjtJQUNBMEIsT0FBTztRQUNMQyxZQUFZO0lBQ2Q7SUFDQUMsTUFBTTtJQUNOQyxXQUFXO1FBQUM1Qiw2RUFBa0JBO0tBQUM7SUFDL0I2QixRQUFRO1FBQ047WUFDRUosT0FBTztnQkFDTEssVUFBVTtZQUNaO1lBQ0FsQixNQUFNO1lBQ05DLE1BQU07WUFDTkMsY0FBYztnQkFBQzthQUFPO1lBQ3RCQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQUM7Z0JBQWU7YUFBTztZQUNoQ0ksUUFBUTtnQkFDTkksUUFBUSxDQUFDLEVBQUVPLEdBQUcsRUFBRTtvQkFDZCxPQUFPN0Isa0VBQVlBLENBQUM2QixJQUFJQyxJQUFJO2dCQUM5QjtZQUNGO1FBQ0Y7UUFDQTtZQUNFcEIsTUFBTTtZQUNOQyxNQUFNO1lBQ05vQixPQUFPO2dCQUNMQyxnQkFBZ0I7b0JBQUNqQyw2RUFBb0JBO2lCQUFDO1lBQ3hDO1lBQ0FrQyxPQUFPO1FBQ1Q7UUFDQTtZQUNFLEdBQUc5Qix1QkFBdUI7WUFDMUJvQixPQUFPO2dCQUNMLEdBQUlwQix5QkFBeUJvQixTQUFTLENBQUMsQ0FBQztnQkFDeENLLFVBQVU7WUFDWjtRQUNGO0tBQ0Q7SUFDRCw0RUFBNEU7SUFDNUUsMkVBQTJFO0lBQzNFLDZDQUE2QztJQUU3Q0csT0FBTztRQUNMRyxZQUFZO1lBQUNqQyxpRkFBc0JBO1NBQUM7SUFDdEM7QUFDRjtBQUVBLGlFQUFlZSxLQUFLQSxFQUFBIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBjcmVhdGVBY2Nlc3MgfSBmcm9tICcuL2FjY2Vzcy9jcmVhdGUnXG5pbXBvcnQgeyByZWFkQWNjZXNzIH0gZnJvbSAnLi9hY2Nlc3MvcmVhZCdcbmltcG9ydCB7IHVwZGF0ZUFuZERlbGV0ZUFjY2VzcyB9IGZyb20gJy4vYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZSdcbmltcG9ydCB7IGV4dGVybmFsVXNlcnNMb2dpbiB9IGZyb20gJy4vZW5kcG9pbnRzL2V4dGVybmFsVXNlcnNMb2dpbidcbmltcG9ydCB7IGVuc3VyZVVuaXF1ZVVzZXJuYW1lIH0gZnJvbSAnLi9ob29rcy9lbnN1cmVVbmlxdWVVc2VybmFtZSdcbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJ0AvYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IHNldENvb2tpZUJhc2VkT25Eb21haW4gfSBmcm9tICcuL2hvb2tzL3NldENvb2tpZUJhc2VkT25Eb21haW4nXG5pbXBvcnQgeyB0ZW5hbnRzQXJyYXlGaWVsZCB9IGZyb20gJ0BwYXlsb2FkY21zL3BsdWdpbi1tdWx0aS10ZW5hbnQvZmllbGRzJ1xuXG5jb25zdCBkZWZhdWx0VGVuYW50QXJyYXlGaWVsZCA9IHRlbmFudHNBcnJheUZpZWxkKHtcbiAgdGVuYW50c0FycmF5RmllbGROYW1lOiAndGVuYW50cycsXG4gIHRlbmFudHNBcnJheVRlbmFudEZpZWxkTmFtZTogJ3RlbmFudCcsXG4gIHRlbmFudHNDb2xsZWN0aW9uU2x1ZzogJ3RlbmFudHMnLFxuICBhcnJheUZpZWxkQWNjZXNzOiB7fSxcbiAgdGVuYW50RmllbGRBY2Nlc3M6IHt9LFxuICByb3dGaWVsZHM6IFtcbiAgICB7XG4gICAgICBuYW1lOiAncm9sZXMnLFxuICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICBkZWZhdWx0VmFsdWU6IFsndGVuYW50LXZpZXdlciddLFxuICAgICAgaGFzTWFueTogdHJ1ZSxcbiAgICAgIG9wdGlvbnM6IFsndGVuYW50LWFkbWluJywgJ3RlbmFudC12aWV3ZXInXSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gIF0sXG59KVxuXG5jb25zdCBVc2VyczogQ29sbGVjdGlvbkNvbmZpZyA9IHtcbiAgc2x1ZzogJ3VzZXJzJyxcbiAgYWNjZXNzOiB7XG4gICAgY3JlYXRlOiBjcmVhdGVBY2Nlc3MsXG4gICAgZGVsZXRlOiB1cGRhdGVBbmREZWxldGVBY2Nlc3MsXG4gICAgcmVhZDogcmVhZEFjY2VzcyxcbiAgICB1cGRhdGU6IHVwZGF0ZUFuZERlbGV0ZUFjY2VzcyxcbiAgfSxcbiAgYWRtaW46IHtcbiAgICB1c2VBc1RpdGxlOiAnZW1haWwnLFxuICB9LFxuICBhdXRoOiB0cnVlLFxuICBlbmRwb2ludHM6IFtleHRlcm5hbFVzZXJzTG9naW5dLFxuICBmaWVsZHM6IFtcbiAgICB7XG4gICAgICBhZG1pbjoge1xuICAgICAgICBwb3NpdGlvbjogJ3NpZGViYXInLFxuICAgICAgfSxcbiAgICAgIG5hbWU6ICdyb2xlcycsXG4gICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogWyd1c2VyJ10sXG4gICAgICBoYXNNYW55OiB0cnVlLFxuICAgICAgb3B0aW9uczogWydzdXBlci1hZG1pbicsICd1c2VyJ10sXG4gICAgICBhY2Nlc3M6IHtcbiAgICAgICAgdXBkYXRlOiAoeyByZXEgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBpc1N1cGVyQWRtaW4ocmVxLnVzZXIpXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIGhvb2tzOiB7XG4gICAgICAgIGJlZm9yZVZhbGlkYXRlOiBbZW5zdXJlVW5pcXVlVXNlcm5hbWVdLFxuICAgICAgfSxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgLi4uZGVmYXVsdFRlbmFudEFycmF5RmllbGQsXG4gICAgICBhZG1pbjoge1xuICAgICAgICAuLi4oZGVmYXVsdFRlbmFudEFycmF5RmllbGQ/LmFkbWluIHx8IHt9KSxcbiAgICAgICAgcG9zaXRpb246ICdzaWRlYmFyJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSxcbiAgLy8gVGhlIGZvbGxvd2luZyBob29rIHNldHMgYSBjb29raWUgYmFzZWQgb24gdGhlIGRvbWFpbiBhIHVzZXIgbG9ncyBpbiBmcm9tLlxuICAvLyBJdCBjaGVja3MgdGhlIGRvbWFpbiBhbmQgbWF0Y2hlcyBpdCB0byBhIHRlbmFudCBpbiB0aGUgc3lzdGVtLCB0aGVuIHNldHNcbiAgLy8gYSAncGF5bG9hZC10ZW5hbnQnIGNvb2tpZSBmb3IgdGhhdCB0ZW5hbnQuXG5cbiAgaG9va3M6IHtcbiAgICBhZnRlckxvZ2luOiBbc2V0Q29va2llQmFzZWRPbkRvbWFpbl0sXG4gIH0sXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzXG4iXSwibmFtZXMiOlsiY3JlYXRlQWNjZXNzIiwicmVhZEFjY2VzcyIsInVwZGF0ZUFuZERlbGV0ZUFjY2VzcyIsImV4dGVybmFsVXNlcnNMb2dpbiIsImVuc3VyZVVuaXF1ZVVzZXJuYW1lIiwiaXNTdXBlckFkbWluIiwic2V0Q29va2llQmFzZWRPbkRvbWFpbiIsInRlbmFudHNBcnJheUZpZWxkIiwiZGVmYXVsdFRlbmFudEFycmF5RmllbGQiLCJ0ZW5hbnRzQXJyYXlGaWVsZE5hbWUiLCJ0ZW5hbnRzQXJyYXlUZW5hbnRGaWVsZE5hbWUiLCJ0ZW5hbnRzQ29sbGVjdGlvblNsdWciLCJhcnJheUZpZWxkQWNjZXNzIiwidGVuYW50RmllbGRBY2Nlc3MiLCJyb3dGaWVsZHMiLCJuYW1lIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImhhc01hbnkiLCJvcHRpb25zIiwicmVxdWlyZWQiLCJVc2VycyIsInNsdWciLCJhY2Nlc3MiLCJjcmVhdGUiLCJkZWxldGUiLCJyZWFkIiwidXBkYXRlIiwiYWRtaW4iLCJ1c2VBc1RpdGxlIiwiYXV0aCIsImVuZHBvaW50cyIsImZpZWxkcyIsInBvc2l0aW9uIiwicmVxIiwidXNlciIsImhvb2tzIiwiYmVmb3JlVmFsaWRhdGUiLCJpbmRleCIsImFmdGVyTG9naW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/payload.config.ts":
/*!*******************************!*\
  !*** ./src/payload.config.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/db-postgres */ \"(rsc)/./node_modules/@payloadcms/db-postgres/dist/index.js\");\n/* harmony import */ var _payloadcms_richtext_lexical__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @payloadcms/richtext-lexical */ \"(rsc)/./node_modules/@payloadcms/richtext-lexical/dist/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/payload/dist/config/build.js\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _collections_Pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collections/Pages */ \"(rsc)/./src/collections/Pages/index.ts\");\n/* harmony import */ var _collections_Tenants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./collections/Tenants */ \"(rsc)/./src/collections/Tenants/index.ts\");\n/* harmony import */ var _collections_Users__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collections/Users */ \"(rsc)/./src/collections/Users/index.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant */ \"(rsc)/./node_modules/@payloadcms/plugin-multi-tenant/dist/index.js\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _seed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./seed */ \"(rsc)/./src/seed.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///Users/trangiakiet/Documents/GitHub/greenbook-cms/src/payload.config.ts\");\nconst dirname = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(filename);\n// eslint-disable-next-line no-restricted-exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,payload__WEBPACK_IMPORTED_MODULE_10__.buildConfig)({\n    admin: {\n        user: 'users'\n    },\n    collections: [\n        _collections_Pages__WEBPACK_IMPORTED_MODULE_3__.Pages,\n        _collections_Users__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n        _collections_Tenants__WEBPACK_IMPORTED_MODULE_4__.Tenants\n    ],\n    // db: mongooseAdapter({\n    //   url: process.env.DATABASE_URI as string,\n    // }),\n    db: (0,_payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__.postgresAdapter)({\n        pool: {\n            connectionString: process.env.POSTGRES_URL\n        }\n    }),\n    onInit: async (args)=>{\n        if (process.env.SEED_DB) {\n            await (0,_seed__WEBPACK_IMPORTED_MODULE_9__.seed)(args);\n        }\n    },\n    editor: (0,_payloadcms_richtext_lexical__WEBPACK_IMPORTED_MODULE_11__.lexicalEditor)({}),\n    graphQL: {\n        schemaOutputFile: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(dirname, 'generated-schema.graphql')\n    },\n    secret: process.env.PAYLOAD_SECRET,\n    typescript: {\n        outputFile: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(dirname, 'payload-types.ts')\n    },\n    plugins: [\n        (0,_payloadcms_plugin_multi_tenant__WEBPACK_IMPORTED_MODULE_6__.multiTenantPlugin)({\n            collections: {\n                pages: {}\n            },\n            tenantField: {\n                access: {\n                    read: ()=>true,\n                    update: ({ req })=>{\n                        if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_7__.isSuperAdmin)(req.user)) {\n                            return true;\n                        }\n                        return (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_8__.getUserTenantIDs)(req.user).length > 0;\n                    }\n                }\n            },\n            tenantsArrayField: {\n                includeDefaultField: false\n            },\n            userHasAccessToAllTenants: (user)=>(0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_7__.isSuperAdmin)(user)\n        })\n    ]\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvcGF5bG9hZC5jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3lEO0FBQ0c7QUFDckM7QUFDYztBQUNGO0FBRVE7QUFDSTtBQUNSO0FBQzRCO0FBQ2Y7QUFFVztBQUNsQztBQUU3QixNQUFNWSxXQUFXUixrREFBYUEsQ0FBQyxnRkFBZTtBQUM5QyxNQUFNVSxVQUFVWixtREFBWSxDQUFDVTtBQUU3QixpREFBaUQ7QUFDakQsaUVBQWVULHFEQUFXQSxDQUFDO0lBQ3pCWSxPQUFPO1FBQ0xDLE1BQU07SUFDUjtJQUNBQyxhQUFhO1FBQUNaLHFEQUFLQTtRQUFFRSwwREFBS0E7UUFBRUQseURBQU9BO0tBQUM7SUFDcEMsd0JBQXdCO0lBQ3hCLDZDQUE2QztJQUM3QyxNQUFNO0lBQ05ZLElBQUlsQix3RUFBZUEsQ0FBQztRQUNsQm1CLE1BQU07WUFDSkMsa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7UUFDNUM7SUFDRjtJQUNBQyxRQUFRLE9BQU9DO1FBQ2IsSUFBSUosUUFBUUMsR0FBRyxDQUFDSSxPQUFPLEVBQUU7WUFDdkIsTUFBTWYsMkNBQUlBLENBQUNjO1FBQ2I7SUFDRjtJQUNBRSxRQUFRMUIsNEVBQWFBLENBQUMsQ0FBQztJQUN2QjJCLFNBQVM7UUFDUEMsa0JBQWtCM0IsbURBQVksQ0FBQ1ksU0FBUztJQUMxQztJQUNBaUIsUUFBUVYsUUFBUUMsR0FBRyxDQUFDVSxjQUFjO0lBQ2xDQyxZQUFZO1FBQ1ZDLFlBQVloQyxtREFBWSxDQUFDWSxTQUFTO0lBQ3BDO0lBQ0FxQixTQUFTO1FBQ1AzQixrRkFBaUJBLENBQVM7WUFDeEJTLGFBQWE7Z0JBQ1htQixPQUFPLENBQUM7WUFDVjtZQUNBQyxhQUFhO2dCQUNYQyxRQUFRO29CQUNOQyxNQUFNLElBQU07b0JBQ1pDLFFBQVEsQ0FBQyxFQUFFQyxHQUFHLEVBQUU7d0JBQ2QsSUFBSWhDLGtFQUFZQSxDQUFDZ0MsSUFBSXpCLElBQUksR0FBRzs0QkFDMUIsT0FBTzt3QkFDVDt3QkFDQSxPQUFPTiw2RUFBZ0JBLENBQUMrQixJQUFJekIsSUFBSSxFQUFFMEIsTUFBTSxHQUFHO29CQUM3QztnQkFDRjtZQUNGO1lBQ0FDLG1CQUFtQjtnQkFDakJDLHFCQUFxQjtZQUN2QjtZQUNBQywyQkFBMkIsQ0FBQzdCLE9BQVNQLGtFQUFZQSxDQUFDTztRQUNwRDtLQUNEO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvcGF5bG9hZC5jb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbW9uZ29vc2VBZGFwdGVyIH0gZnJvbSAnQHBheWxvYWRjbXMvZGItbW9uZ29kYidcbmltcG9ydCB7IHBvc3RncmVzQWRhcHRlciB9IGZyb20gJ0BwYXlsb2FkY21zL2RiLXBvc3RncmVzJ1xuaW1wb3J0IHsgbGV4aWNhbEVkaXRvciB9IGZyb20gJ0BwYXlsb2FkY21zL3JpY2h0ZXh0LWxleGljYWwnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgYnVpbGRDb25maWcgfSBmcm9tICdwYXlsb2FkJ1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ3VybCdcblxuaW1wb3J0IHsgUGFnZXMgfSBmcm9tICcuL2NvbGxlY3Rpb25zL1BhZ2VzJ1xuaW1wb3J0IHsgVGVuYW50cyB9IGZyb20gJy4vY29sbGVjdGlvbnMvVGVuYW50cydcbmltcG9ydCBVc2VycyBmcm9tICcuL2NvbGxlY3Rpb25zL1VzZXJzJ1xuaW1wb3J0IHsgbXVsdGlUZW5hbnRQbHVnaW4gfSBmcm9tICdAcGF5bG9hZGNtcy9wbHVnaW4tbXVsdGktdGVuYW50J1xuaW1wb3J0IHsgaXNTdXBlckFkbWluIH0gZnJvbSAnLi9hY2Nlc3MvaXNTdXBlckFkbWluJ1xuaW1wb3J0IHR5cGUgeyBDb25maWcgfSBmcm9tICcuL3BheWxvYWQtdHlwZXMnXG5pbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IHNlZWQgfSBmcm9tICcuL3NlZWQnXG5cbmNvbnN0IGZpbGVuYW1lID0gZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpXG5jb25zdCBkaXJuYW1lID0gcGF0aC5kaXJuYW1lKGZpbGVuYW1lKVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1leHBvcnRzXG5leHBvcnQgZGVmYXVsdCBidWlsZENvbmZpZyh7XG4gIGFkbWluOiB7XG4gICAgdXNlcjogJ3VzZXJzJyxcbiAgfSxcbiAgY29sbGVjdGlvbnM6IFtQYWdlcywgVXNlcnMsIFRlbmFudHNdLFxuICAvLyBkYjogbW9uZ29vc2VBZGFwdGVyKHtcbiAgLy8gICB1cmw6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSSSBhcyBzdHJpbmcsXG4gIC8vIH0pLFxuICBkYjogcG9zdGdyZXNBZGFwdGVyKHtcbiAgICBwb29sOiB7XG4gICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5QT1NUR1JFU19VUkwsXG4gICAgfSxcbiAgfSksXG4gIG9uSW5pdDogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuU0VFRF9EQikge1xuICAgICAgYXdhaXQgc2VlZChhcmdzKVxuICAgIH1cbiAgfSxcbiAgZWRpdG9yOiBsZXhpY2FsRWRpdG9yKHt9KSxcbiAgZ3JhcGhRTDoge1xuICAgIHNjaGVtYU91dHB1dEZpbGU6IHBhdGgucmVzb2x2ZShkaXJuYW1lLCAnZ2VuZXJhdGVkLXNjaGVtYS5ncmFwaHFsJyksXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9TRUNSRVQgYXMgc3RyaW5nLFxuICB0eXBlc2NyaXB0OiB7XG4gICAgb3V0cHV0RmlsZTogcGF0aC5yZXNvbHZlKGRpcm5hbWUsICdwYXlsb2FkLXR5cGVzLnRzJyksXG4gIH0sXG4gIHBsdWdpbnM6IFtcbiAgICBtdWx0aVRlbmFudFBsdWdpbjxDb25maWc+KHtcbiAgICAgIGNvbGxlY3Rpb25zOiB7XG4gICAgICAgIHBhZ2VzOiB7fSxcbiAgICAgIH0sXG4gICAgICB0ZW5hbnRGaWVsZDoge1xuICAgICAgICBhY2Nlc3M6IHtcbiAgICAgICAgICByZWFkOiAoKSA9PiB0cnVlLFxuICAgICAgICAgIHVwZGF0ZTogKHsgcmVxIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChpc1N1cGVyQWRtaW4ocmVxLnVzZXIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0VXNlclRlbmFudElEcyhyZXEudXNlcikubGVuZ3RoID4gMFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdGVuYW50c0FycmF5RmllbGQ6IHtcbiAgICAgICAgaW5jbHVkZURlZmF1bHRGaWVsZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgdXNlckhhc0FjY2Vzc1RvQWxsVGVuYW50czogKHVzZXIpID0+IGlzU3VwZXJBZG1pbih1c2VyKSxcbiAgICB9KSxcbiAgXSxcbn0pXG4iXSwibmFtZXMiOlsicG9zdGdyZXNBZGFwdGVyIiwibGV4aWNhbEVkaXRvciIsInBhdGgiLCJidWlsZENvbmZpZyIsImZpbGVVUkxUb1BhdGgiLCJQYWdlcyIsIlRlbmFudHMiLCJVc2VycyIsIm11bHRpVGVuYW50UGx1Z2luIiwiaXNTdXBlckFkbWluIiwiZ2V0VXNlclRlbmFudElEcyIsInNlZWQiLCJmaWxlbmFtZSIsInVybCIsImRpcm5hbWUiLCJhZG1pbiIsInVzZXIiLCJjb2xsZWN0aW9ucyIsImRiIiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiUE9TVEdSRVNfVVJMIiwib25Jbml0IiwiYXJncyIsIlNFRURfREIiLCJlZGl0b3IiLCJncmFwaFFMIiwic2NoZW1hT3V0cHV0RmlsZSIsInJlc29sdmUiLCJzZWNyZXQiLCJQQVlMT0FEX1NFQ1JFVCIsInR5cGVzY3JpcHQiLCJvdXRwdXRGaWxlIiwicGx1Z2lucyIsInBhZ2VzIiwidGVuYW50RmllbGQiLCJhY2Nlc3MiLCJyZWFkIiwidXBkYXRlIiwicmVxIiwibGVuZ3RoIiwidGVuYW50c0FycmF5RmllbGQiLCJpbmNsdWRlRGVmYXVsdEZpZWxkIiwidXNlckhhc0FjY2Vzc1RvQWxsVGVuYW50cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/payload.config.ts\n");

/***/ }),

/***/ "(rsc)/./src/seed.ts":
/*!*********************!*\
  !*** ./src/seed.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   seed: () => (/* binding */ seed)\n/* harmony export */ });\nconst seed = async (payload)=>{\n    const tenant1 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 1',\n            slug: 'gold',\n            domain: 'gold.localhost'\n        }\n    });\n    const tenant2 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 2',\n            slug: 'silver',\n            domain: 'silver.localhost'\n        }\n    });\n    const tenant3 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 3',\n            slug: 'bronze',\n            domain: 'bronze.localhost'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'demo@payloadcms.com',\n            password: 'demo',\n            roles: [\n                'super-admin'\n            ]\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant1@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant1.id\n                }\n            ],\n            username: 'tenant1'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant2@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant2.id\n                }\n            ],\n            username: 'tenant2'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant3@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant3.id\n                }\n            ],\n            username: 'tenant3'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'multi-admin@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant1.id\n                },\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant2.id\n                },\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant3.id\n                }\n            ],\n            username: 'multi-admin'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant1.id,\n            title: 'Page for Tenant 1'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant2.id,\n            title: 'Page for Tenant 2'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant3.id,\n            title: 'Page for Tenant 3'\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VlZC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsT0FBc0MsT0FBT0M7SUFDeEQsTUFBTUMsVUFBVSxNQUFNRCxRQUFRRSxNQUFNLENBQUM7UUFDbkNDLFlBQVk7UUFDWkMsTUFBTTtZQUNKQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxNQUFNQyxVQUFVLE1BQU1SLFFBQVFFLE1BQU0sQ0FBQztRQUNuQ0MsWUFBWTtRQUNaQyxNQUFNO1lBQ0pDLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxRQUFRO1FBQ1Y7SUFDRjtJQUVBLE1BQU1FLFVBQVUsTUFBTVQsUUFBUUUsTUFBTSxDQUFDO1FBQ25DQyxZQUFZO1FBQ1pDLE1BQU07WUFDSkMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLFFBQVE7UUFDVjtJQUNGO0lBRUEsTUFBTVAsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7YUFBYztRQUN4QjtJQUNGO0lBRUEsTUFBTVosUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZFLFNBQVM7Z0JBQ1A7b0JBQ0VELE9BQU87d0JBQUM7cUJBQWU7b0JBQ3ZCRSxRQUFRYixRQUFRYyxFQUFFO2dCQUNwQjthQUNEO1lBQ0RDLFVBQVU7UUFDWjtJQUNGO0lBRUEsTUFBTWhCLFFBQVFFLE1BQU0sQ0FBQztRQUNuQkMsWUFBWTtRQUNaQyxNQUFNO1lBQ0pNLE9BQU87WUFDUEMsVUFBVTtZQUNWRSxTQUFTO2dCQUNQO29CQUNFRCxPQUFPO3dCQUFDO3FCQUFlO29CQUN2QkUsUUFBUU4sUUFBUU8sRUFBRTtnQkFDcEI7YUFDRDtZQUNEQyxVQUFVO1FBQ1o7SUFDRjtJQUVBLE1BQU1oQixRQUFRRSxNQUFNLENBQUM7UUFDbkJDLFlBQVk7UUFDWkMsTUFBTTtZQUNKTSxPQUFPO1lBQ1BDLFVBQVU7WUFDVkUsU0FBUztnQkFDUDtvQkFDRUQsT0FBTzt3QkFBQztxQkFBZTtvQkFDdkJFLFFBQVFMLFFBQVFNLEVBQUU7Z0JBQ3BCO2FBQ0Q7WUFDREMsVUFBVTtRQUNaO0lBQ0Y7SUFFQSxNQUFNaEIsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZFLFNBQVM7Z0JBQ1A7b0JBQ0VELE9BQU87d0JBQUM7cUJBQWU7b0JBQ3ZCRSxRQUFRYixRQUFRYyxFQUFFO2dCQUNwQjtnQkFDQTtvQkFDRUgsT0FBTzt3QkFBQztxQkFBZTtvQkFDdkJFLFFBQVFOLFFBQVFPLEVBQUU7Z0JBQ3BCO2dCQUNBO29CQUNFSCxPQUFPO3dCQUFDO3FCQUFlO29CQUN2QkUsUUFBUUwsUUFBUU0sRUFBRTtnQkFDcEI7YUFDRDtZQUNEQyxVQUFVO1FBQ1o7SUFDRjtJQUVBLE1BQU1oQixRQUFRRSxNQUFNLENBQUM7UUFDbkJDLFlBQVk7UUFDWkMsTUFBTTtZQUNKRSxNQUFNO1lBQ05RLFFBQVFiLFFBQVFjLEVBQUU7WUFDbEJFLE9BQU87UUFDVDtJQUNGO0lBRUEsTUFBTWpCLFFBQVFFLE1BQU0sQ0FBQztRQUNuQkMsWUFBWTtRQUNaQyxNQUFNO1lBQ0pFLE1BQU07WUFDTlEsUUFBUU4sUUFBUU8sRUFBRTtZQUNsQkUsT0FBTztRQUNUO0lBQ0Y7SUFFQSxNQUFNakIsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSkUsTUFBTTtZQUNOUSxRQUFRTCxRQUFRTSxFQUFFO1lBQ2xCRSxPQUFPO1FBQ1Q7SUFDRjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL3NlZWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSAncGF5bG9hZCdcblxuZXhwb3J0IGNvbnN0IHNlZWQ6IE5vbk51bGxhYmxlPENvbmZpZ1snb25Jbml0J10+ID0gYXN5bmMgKHBheWxvYWQpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgY29uc3QgdGVuYW50MSA9IGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgZGF0YToge1xuICAgICAgbmFtZTogJ1RlbmFudCAxJyxcbiAgICAgIHNsdWc6ICdnb2xkJyxcbiAgICAgIGRvbWFpbjogJ2dvbGQubG9jYWxob3N0JyxcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHRlbmFudDIgPSBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3RlbmFudHMnLFxuICAgIGRhdGE6IHtcbiAgICAgIG5hbWU6ICdUZW5hbnQgMicsXG4gICAgICBzbHVnOiAnc2lsdmVyJyxcbiAgICAgIGRvbWFpbjogJ3NpbHZlci5sb2NhbGhvc3QnLFxuICAgIH0sXG4gIH0pXG5cbiAgY29uc3QgdGVuYW50MyA9IGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgZGF0YToge1xuICAgICAgbmFtZTogJ1RlbmFudCAzJyxcbiAgICAgIHNsdWc6ICdicm9uemUnLFxuICAgICAgZG9tYWluOiAnYnJvbnplLmxvY2FsaG9zdCcsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICBkYXRhOiB7XG4gICAgICBlbWFpbDogJ2RlbW9AcGF5bG9hZGNtcy5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdkZW1vJyxcbiAgICAgIHJvbGVzOiBbJ3N1cGVyLWFkbWluJ10sXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICBkYXRhOiB7XG4gICAgICBlbWFpbDogJ3RlbmFudDFAcGF5bG9hZGNtcy5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdkZW1vJyxcbiAgICAgIHRlbmFudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGVzOiBbJ3RlbmFudC1hZG1pbiddLFxuICAgICAgICAgIHRlbmFudDogdGVuYW50MS5pZCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB1c2VybmFtZTogJ3RlbmFudDEnLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgZGF0YToge1xuICAgICAgZW1haWw6ICd0ZW5hbnQyQHBheWxvYWRjbXMuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnZGVtbycsXG4gICAgICB0ZW5hbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlczogWyd0ZW5hbnQtYWRtaW4nXSxcbiAgICAgICAgICB0ZW5hbnQ6IHRlbmFudDIuaWQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdXNlcm5hbWU6ICd0ZW5hbnQyJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxuICAgIGRhdGE6IHtcbiAgICAgIGVtYWlsOiAndGVuYW50M0BwYXlsb2FkY21zLmNvbScsXG4gICAgICBwYXNzd29yZDogJ2RlbW8nLFxuICAgICAgdGVuYW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZXM6IFsndGVuYW50LWFkbWluJ10sXG4gICAgICAgICAgdGVuYW50OiB0ZW5hbnQzLmlkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHVzZXJuYW1lOiAndGVuYW50MycsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICBkYXRhOiB7XG4gICAgICBlbWFpbDogJ211bHRpLWFkbWluQHBheWxvYWRjbXMuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnZGVtbycsXG4gICAgICB0ZW5hbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlczogWyd0ZW5hbnQtYWRtaW4nXSxcbiAgICAgICAgICB0ZW5hbnQ6IHRlbmFudDEuaWQsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlczogWyd0ZW5hbnQtYWRtaW4nXSxcbiAgICAgICAgICB0ZW5hbnQ6IHRlbmFudDIuaWQsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlczogWyd0ZW5hbnQtYWRtaW4nXSxcbiAgICAgICAgICB0ZW5hbnQ6IHRlbmFudDMuaWQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdXNlcm5hbWU6ICdtdWx0aS1hZG1pbicsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3BhZ2VzJyxcbiAgICBkYXRhOiB7XG4gICAgICBzbHVnOiAnaG9tZScsXG4gICAgICB0ZW5hbnQ6IHRlbmFudDEuaWQsXG4gICAgICB0aXRsZTogJ1BhZ2UgZm9yIFRlbmFudCAxJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAncGFnZXMnLFxuICAgIGRhdGE6IHtcbiAgICAgIHNsdWc6ICdob21lJyxcbiAgICAgIHRlbmFudDogdGVuYW50Mi5pZCxcbiAgICAgIHRpdGxlOiAnUGFnZSBmb3IgVGVuYW50IDInLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICdwYWdlcycsXG4gICAgZGF0YToge1xuICAgICAgc2x1ZzogJ2hvbWUnLFxuICAgICAgdGVuYW50OiB0ZW5hbnQzLmlkLFxuICAgICAgdGl0bGU6ICdQYWdlIGZvciBUZW5hbnQgMycsXG4gICAgfSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJzZWVkIiwicGF5bG9hZCIsInRlbmFudDEiLCJjcmVhdGUiLCJjb2xsZWN0aW9uIiwiZGF0YSIsIm5hbWUiLCJzbHVnIiwiZG9tYWluIiwidGVuYW50MiIsInRlbmFudDMiLCJlbWFpbCIsInBhc3N3b3JkIiwicm9sZXMiLCJ0ZW5hbnRzIiwidGVuYW50IiwiaWQiLCJ1c2VybmFtZSIsInRpdGxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/seed.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/extractID.ts":
/*!************************************!*\
  !*** ./src/utilities/extractID.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractID: () => (/* binding */ extractID)\n/* harmony export */ });\nconst extractID = (objectOrID)=>{\n    if (objectOrID && typeof objectOrID === 'object') return objectOrID.id;\n    return objectOrID;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2V4dHJhY3RJRC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBR08sTUFBTUEsWUFBWSxDQUN2QkM7SUFFQSxJQUFJQSxjQUFjLE9BQU9BLGVBQWUsVUFBVSxPQUFPQSxXQUFXQyxFQUFFO0lBRXRFLE9BQU9EO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3RyYW5naWFraWV0L0RvY3VtZW50cy9HaXRIdWIvZ3JlZW5ib29rLWNtcy9zcmMvdXRpbGl0aWVzL2V4dHJhY3RJRC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25maWcgfSBmcm9tICdAL3BheWxvYWQtdHlwZXMnXG5pbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25TbHVnIH0gZnJvbSAncGF5bG9hZCdcblxuZXhwb3J0IGNvbnN0IGV4dHJhY3RJRCA9IDxUIGV4dGVuZHMgQ29uZmlnWydjb2xsZWN0aW9ucyddW0NvbGxlY3Rpb25TbHVnXT4oXG4gIG9iamVjdE9ySUQ6IFQgfCBUWydpZCddLFxuKTogVFsnaWQnXSA9PiB7XG4gIGlmIChvYmplY3RPcklEICYmIHR5cGVvZiBvYmplY3RPcklEID09PSAnb2JqZWN0JykgcmV0dXJuIG9iamVjdE9ySUQuaWRcblxuICByZXR1cm4gb2JqZWN0T3JJRFxufVxuIl0sIm5hbWVzIjpbImV4dHJhY3RJRCIsIm9iamVjdE9ySUQiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/extractID.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/getCollectionIDType.ts":
/*!**********************************************!*\
  !*** ./src/utilities/getCollectionIDType.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCollectionIDType: () => (/* binding */ getCollectionIDType)\n/* harmony export */ });\nconst getCollectionIDType = ({ collectionSlug, payload })=>{\n    return payload.collections[collectionSlug]?.customIDType ?? payload.db.defaultIDType;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2dldENvbGxlY3Rpb25JRFR5cGUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQU1PLE1BQU1BLHNCQUFzQixDQUFDLEVBQUVDLGNBQWMsRUFBRUMsT0FBTyxFQUFRO0lBQ25FLE9BQU9BLFFBQVFDLFdBQVcsQ0FBQ0YsZUFBZSxFQUFFRyxnQkFBZ0JGLFFBQVFHLEVBQUUsQ0FBQ0MsYUFBYTtBQUN0RixFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHJhbmdpYWtpZXQvRG9jdW1lbnRzL0dpdEh1Yi9ncmVlbmJvb2stY21zL3NyYy91dGlsaXRpZXMvZ2V0Q29sbGVjdGlvbklEVHlwZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25TbHVnLCBQYXlsb2FkIH0gZnJvbSAncGF5bG9hZCdcblxudHlwZSBBcmdzID0ge1xuICBjb2xsZWN0aW9uU2x1ZzogQ29sbGVjdGlvblNsdWdcbiAgcGF5bG9hZDogUGF5bG9hZFxufVxuZXhwb3J0IGNvbnN0IGdldENvbGxlY3Rpb25JRFR5cGUgPSAoeyBjb2xsZWN0aW9uU2x1ZywgcGF5bG9hZCB9OiBBcmdzKTogJ251bWJlcicgfCAndGV4dCcgPT4ge1xuICByZXR1cm4gcGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uU2x1Z10/LmN1c3RvbUlEVHlwZSA/PyBwYXlsb2FkLmRiLmRlZmF1bHRJRFR5cGVcbn1cbiJdLCJuYW1lcyI6WyJnZXRDb2xsZWN0aW9uSURUeXBlIiwiY29sbGVjdGlvblNsdWciLCJwYXlsb2FkIiwiY29sbGVjdGlvbnMiLCJjdXN0b21JRFR5cGUiLCJkYiIsImRlZmF1bHRJRFR5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/getCollectionIDType.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/getUserTenantIDs.ts":
/*!*******************************************!*\
  !*** ./src/utilities/getUserTenantIDs.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserTenantIDs: () => (/* binding */ getUserTenantIDs)\n/* harmony export */ });\n/* harmony import */ var _extractID__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extractID */ \"(rsc)/./src/utilities/extractID.ts\");\n\n/**\n * Returns array of all tenant IDs assigned to a user\n *\n * @param user - User object with tenants field\n * @param role - Optional role to filter by\n */ const getUserTenantIDs = (user, role)=>{\n    if (!user) {\n        return [];\n    }\n    return user?.tenants?.reduce((acc, { roles, tenant })=>{\n        if (role && !roles.includes(role)) {\n            return acc;\n        }\n        if (tenant) {\n            acc.push((0,_extractID__WEBPACK_IMPORTED_MODULE_0__.extractID)(tenant));\n        }\n        return acc;\n    }, []) || [];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDdUM7QUFFdkM7Ozs7O0NBS0MsR0FDTSxNQUFNQyxtQkFBbUIsQ0FDOUJDLE1BQ0FDO0lBRUEsSUFBSSxDQUFDRCxNQUFNO1FBQ1QsT0FBTyxFQUFFO0lBQ1g7SUFFQSxPQUNFQSxNQUFNRSxTQUFTQyxPQUF1QixDQUFDQyxLQUFLLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQzNELElBQUlMLFFBQVEsQ0FBQ0ksTUFBTUUsUUFBUSxDQUFDTixPQUFPO1lBQ2pDLE9BQU9HO1FBQ1Q7UUFFQSxJQUFJRSxRQUFRO1lBQ1ZGLElBQUlJLElBQUksQ0FBQ1YscURBQVNBLENBQUNRO1FBQ3JCO1FBRUEsT0FBT0Y7SUFDVCxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBRWhCLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90cmFuZ2lha2lldC9Eb2N1bWVudHMvR2l0SHViL2dyZWVuYm9vay1jbXMvc3JjL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVGVuYW50LCBVc2VyIH0gZnJvbSAnLi4vcGF5bG9hZC10eXBlcydcbmltcG9ydCB7IGV4dHJhY3RJRCB9IGZyb20gJy4vZXh0cmFjdElEJ1xuXG4vKipcbiAqIFJldHVybnMgYXJyYXkgb2YgYWxsIHRlbmFudCBJRHMgYXNzaWduZWQgdG8gYSB1c2VyXG4gKlxuICogQHBhcmFtIHVzZXIgLSBVc2VyIG9iamVjdCB3aXRoIHRlbmFudHMgZmllbGRcbiAqIEBwYXJhbSByb2xlIC0gT3B0aW9uYWwgcm9sZSB0byBmaWx0ZXIgYnlcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVzZXJUZW5hbnRJRHMgPSAoXG4gIHVzZXI6IG51bGwgfCBVc2VyLFxuICByb2xlPzogTm9uTnVsbGFibGU8VXNlclsndGVuYW50cyddPltudW1iZXJdWydyb2xlcyddW251bWJlcl0sXG4pOiBUZW5hbnRbJ2lkJ11bXSA9PiB7XG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICB1c2VyPy50ZW5hbnRzPy5yZWR1Y2U8VGVuYW50WydpZCddW10+KChhY2MsIHsgcm9sZXMsIHRlbmFudCB9KSA9PiB7XG4gICAgICBpZiAocm9sZSAmJiAhcm9sZXMuaW5jbHVkZXMocm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfVxuXG4gICAgICBpZiAodGVuYW50KSB7XG4gICAgICAgIGFjYy5wdXNoKGV4dHJhY3RJRCh0ZW5hbnQpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwgW10pIHx8IFtdXG4gIClcbn1cbiJdLCJuYW1lcyI6WyJleHRyYWN0SUQiLCJnZXRVc2VyVGVuYW50SURzIiwidXNlciIsInJvbGUiLCJ0ZW5hbnRzIiwicmVkdWNlIiwiYWNjIiwicm9sZXMiLCJ0ZW5hbnQiLCJpbmNsdWRlcyIsInB1c2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/getUserTenantIDs.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "graphql":
/*!**************************!*\
  !*** external "graphql" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql");

/***/ }),

/***/ "graphql/execution/values.js":
/*!**********************************************!*\
  !*** external "graphql/execution/values.js" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql/execution/values.js");

/***/ }),

/***/ "graphql/language/index.js":
/*!********************************************!*\
  !*** external "graphql/language/index.js" ***!
  \********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql/language/index.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/@vercel/og/index.node.js":
/*!**************************************************************!*\
  !*** external "next/dist/compiled/@vercel/og/index.node.js" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("next/dist/compiled/@vercel/og/index.node.js");;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:assert");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:module":
/*!******************************!*\
  !*** external "node:module" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:module");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("pg");

/***/ }),

/***/ "pino":
/*!***********************!*\
  !*** external "pino" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("pino");

/***/ }),

/***/ "pino-pretty":
/*!******************************!*\
  !*** external "pino-pretty" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("pino-pretty");

/***/ }),

/***/ "prettier":
/*!***************************!*\
  !*** external "prettier" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = import("prettier");;

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("readline");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/date-fns","vendor-chunks/@payloadcms","vendor-chunks/next","vendor-chunks/payload","vendor-chunks/lexical","vendor-chunks/@lexical","vendor-chunks/drizzle-orm","vendor-chunks/prompts","vendor-chunks/ws","vendor-chunks/jsox","vendor-chunks/image-size","vendor-chunks/qs-esm","vendor-chunks/jose","vendor-chunks/busboy","vendor-chunks/file-type","vendor-chunks/fast-uri","vendor-chunks/console-table-printer","vendor-chunks/pluralize","vendor-chunks/http-status","vendor-chunks/bson-objectid","vendor-chunks/croner","vendor-chunks/path-to-regexp","vendor-chunks/dataloader","vendor-chunks/strtok3","vendor-chunks/simple-wcswidth","vendor-chunks/token-types","vendor-chunks/streamsearch","vendor-chunks/uint8array-extras","vendor-chunks/ci-info","vendor-chunks/peek-readable","vendor-chunks/deepmerge","vendor-chunks/uuid","vendor-chunks/kleur","vendor-chunks/fast-deep-equal","vendor-chunks/ieee754","vendor-chunks/resolve-pkg-maps","vendor-chunks/sanitize-filename","vendor-chunks/escape-html","vendor-chunks/sisteransi","vendor-chunks/to-no-case","vendor-chunks/scmp","vendor-chunks/truncate-utf8-bytes","vendor-chunks/to-space-case","vendor-chunks/to-snake-case","vendor-chunks/graphql-scalars","vendor-chunks/xss","vendor-chunks/cssfilter","vendor-chunks/graphql-http","vendor-chunks/graphql-playground-html"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftrangiakiet%2FDocuments%2FGitHub%2Fgreenbook-cms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();